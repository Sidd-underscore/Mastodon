{"ast":null,"code":"var createAudio = function createAudio(sources) {\n  var audio = new Audio();\n  sources.forEach(function (_ref) {\n    var type = _ref.type,\n        src = _ref.src;\n    var source = document.createElement('source');\n    source.type = type;\n    source.src = src;\n    audio.appendChild(source);\n  });\n  return audio;\n};\n\nvar play = function play(audio) {\n  if (!audio.paused) {\n    audio.pause();\n\n    if (typeof audio.fastSeek === 'function') {\n      audio.fastSeek(0);\n    } else {\n      audio.currentTime = 0;\n    }\n  }\n\n  audio.play();\n};\n\nexport default function soundsMiddleware() {\n  var soundCache = {\n    boop: createAudio([{\n      src: '/sounds/boop.ogg',\n      type: 'audio/ogg'\n    }, {\n      src: '/sounds/boop.mp3',\n      type: 'audio/mpeg'\n    }])\n  };\n  return function () {\n    return function (next) {\n      return function (action) {\n        if (action.meta && action.meta.sound && soundCache[action.meta.sound]) {\n          play(soundCache[action.meta.sound]);\n        }\n\n        return next(action);\n      };\n    };\n  };\n}\n;","map":{"version":3,"sources":["/home/runner/Mastodon/live/app/javascript/mastodon/middleware/sounds.js"],"names":["createAudio","sources","audio","Audio","forEach","type","src","source","document","createElement","appendChild","play","paused","pause","fastSeek","currentTime","soundsMiddleware","soundCache","boop","next","action","meta","sound"],"mappings":"AAAA,IAAMA,WAAW,GAAG,SAAdA,WAAc,CAAAC,OAAO,EAAI;AAC7B,MAAMC,KAAK,GAAG,IAAIC,KAAJ,EAAd;AACAF,EAAAA,OAAO,CAACG,OAAR,CAAgB,gBAAmB;AAAA,QAAhBC,IAAgB,QAAhBA,IAAgB;AAAA,QAAVC,GAAU,QAAVA,GAAU;AACjC,QAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACAF,IAAAA,MAAM,CAACF,IAAP,GAAcA,IAAd;AACAE,IAAAA,MAAM,CAACD,GAAP,GAAaA,GAAb;AACAJ,IAAAA,KAAK,CAACQ,WAAN,CAAkBH,MAAlB;AACD,GALD;AAMA,SAAOL,KAAP;AACD,CATD;;AAWA,IAAMS,IAAI,GAAG,SAAPA,IAAO,CAAAT,KAAK,EAAI;AACpB,MAAI,CAACA,KAAK,CAACU,MAAX,EAAmB;AACjBV,IAAAA,KAAK,CAACW,KAAN;;AACA,QAAI,OAAOX,KAAK,CAACY,QAAb,KAA0B,UAA9B,EAA0C;AACxCZ,MAAAA,KAAK,CAACY,QAAN,CAAe,CAAf;AACD,KAFD,MAEO;AACLZ,MAAAA,KAAK,CAACa,WAAN,GAAoB,CAApB;AACD;AACF;;AAEDb,EAAAA,KAAK,CAACS,IAAN;AACD,CAXD;;AAaA,eAAe,SAASK,gBAAT,GAA4B;AACzC,MAAMC,UAAU,GAAG;AACjBC,IAAAA,IAAI,EAAElB,WAAW,CAAC,CAChB;AACEM,MAAAA,GAAG,EAAE,kBADP;AAEED,MAAAA,IAAI,EAAE;AAFR,KADgB,EAKhB;AACEC,MAAAA,GAAG,EAAE,kBADP;AAEED,MAAAA,IAAI,EAAE;AAFR,KALgB,CAAD;AADA,GAAnB;AAaA,SAAO;AAAA,WAAM,UAAAc,IAAI;AAAA,aAAI,UAAAC,MAAM,EAAI;AAC7B,YAAIA,MAAM,CAACC,IAAP,IAAeD,MAAM,CAACC,IAAP,CAAYC,KAA3B,IAAoCL,UAAU,CAACG,MAAM,CAACC,IAAP,CAAYC,KAAb,CAAlD,EAAuE;AACrEX,UAAAA,IAAI,CAACM,UAAU,CAACG,MAAM,CAACC,IAAP,CAAYC,KAAb,CAAX,CAAJ;AACD;;AAED,eAAOH,IAAI,CAACC,MAAD,CAAX;AACD,OANgB;AAAA,KAAV;AAAA,GAAP;AAOD;AAAA","sourcesContent":["const createAudio = sources => {\n  const audio = new Audio();\n  sources.forEach(({ type, src }) => {\n    const source = document.createElement('source');\n    source.type = type;\n    source.src = src;\n    audio.appendChild(source);\n  });\n  return audio;\n};\n\nconst play = audio => {\n  if (!audio.paused) {\n    audio.pause();\n    if (typeof audio.fastSeek === 'function') {\n      audio.fastSeek(0);\n    } else {\n      audio.currentTime = 0;\n    }\n  }\n\n  audio.play();\n};\n\nexport default function soundsMiddleware() {\n  const soundCache = {\n    boop: createAudio([\n      {\n        src: '/sounds/boop.ogg',\n        type: 'audio/ogg',\n      },\n      {\n        src: '/sounds/boop.mp3',\n        type: 'audio/mpeg',\n      },\n    ]),\n  };\n\n  return () => next => action => {\n    if (action.meta && action.meta.sound && soundCache[action.meta.sound]) {\n      play(soundCache[action.meta.sound]);\n    }\n\n    return next(action);\n  };\n};\n"]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}