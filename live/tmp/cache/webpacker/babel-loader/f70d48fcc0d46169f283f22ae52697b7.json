{"ast":null,"code":"var _jsxFileName = \"/home/runner/Mastodon/live/app/javascript/mastodon/features/compose/index.js\",\n    _dec,\n    _class,\n    _class2,\n    _temp;\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React from 'react';\nimport ComposeFormContainer from './containers/compose_form_container';\nimport NavigationContainer from './containers/navigation_container';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { connect } from 'react-redux';\nimport { mountCompose, unmountCompose } from '../../actions/compose';\nimport { Link } from 'react-router-dom';\nimport { injectIntl, defineMessages } from 'react-intl';\nimport SearchContainer from './containers/search_container';\nimport Motion from '../ui/util/optional_motion';\nimport spring from 'react-motion/lib/spring';\nimport SearchResultsContainer from './containers/search_results_container';\nimport { changeComposing } from '../../actions/compose';\nimport { openModal } from 'mastodon/actions/modal';\nimport elephantUIPlane from '../../../images/elephant_ui_plane.svg';\nimport { mascot } from '../../initial_state';\nimport Icon from 'mastodon/components/icon';\nimport { logOut } from 'mastodon/utils/log_out';\nvar messages = defineMessages({\n  start: {\n    \"id\": \"getting_started.heading\",\n    \"defaultMessage\": \"Getting started\"\n  },\n  home_timeline: {\n    \"id\": \"tabs_bar.home\",\n    \"defaultMessage\": \"Home\"\n  },\n  notifications: {\n    \"id\": \"tabs_bar.notifications\",\n    \"defaultMessage\": \"Notifications\"\n  },\n  public: {\n    \"id\": \"navigation_bar.public_timeline\",\n    \"defaultMessage\": \"Federated timeline\"\n  },\n  community: {\n    \"id\": \"navigation_bar.community_timeline\",\n    \"defaultMessage\": \"Local timeline\"\n  },\n  preferences: {\n    \"id\": \"navigation_bar.preferences\",\n    \"defaultMessage\": \"Preferences\"\n  },\n  logout: {\n    \"id\": \"navigation_bar.logout\",\n    \"defaultMessage\": \"Logout\"\n  },\n  compose: {\n    \"id\": \"navigation_bar.compose\",\n    \"defaultMessage\": \"Compose new toot\"\n  },\n  logoutMessage: {\n    \"id\": \"confirmations.logout.message\",\n    \"defaultMessage\": \"Are you sure you want to log out?\"\n  },\n  logoutConfirm: {\n    \"id\": \"confirmations.logout.confirm\",\n    \"defaultMessage\": \"Log out\"\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    columns: state.getIn(['settings', 'columns']),\n    showSearch: ownProps.multiColumn ? state.getIn(['search', 'submitted']) && !state.getIn(['search', 'hidden']) : ownProps.isSearchPage\n  };\n};\n\nvar Compose = (_dec = connect(mapStateToProps), _dec(_class = injectIntl(_class = (_temp = _class2 = /*#__PURE__*/function (_React$PureComponent) {\n  _inheritsLoose(Compose, _React$PureComponent);\n\n  function Compose() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$PureComponent.call.apply(_React$PureComponent, [this].concat(args)) || this;\n\n    _this.handleLogoutClick = function (e) {\n      var _this$props = _this.props,\n          dispatch = _this$props.dispatch,\n          intl = _this$props.intl;\n      e.preventDefault();\n      e.stopPropagation();\n      dispatch(openModal('CONFIRM', {\n        message: intl.formatMessage(messages.logoutMessage),\n        confirm: intl.formatMessage(messages.logoutConfirm),\n        closeWhenConfirm: false,\n        onConfirm: function onConfirm() {\n          return logOut();\n        }\n      }));\n      return false;\n    };\n\n    _this.onFocus = function () {\n      _this.props.dispatch(changeComposing(true));\n    };\n\n    _this.onBlur = function () {\n      _this.props.dispatch(changeComposing(false));\n    };\n\n    return _this;\n  }\n\n  var _proto = Compose.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var isSearchPage = this.props.isSearchPage;\n\n    if (!isSearchPage) {\n      this.props.dispatch(mountCompose());\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var isSearchPage = this.props.isSearchPage;\n\n    if (!isSearchPage) {\n      this.props.dispatch(unmountCompose());\n    }\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var _this$props2 = this.props,\n        multiColumn = _this$props2.multiColumn,\n        showSearch = _this$props2.showSearch,\n        isSearchPage = _this$props2.isSearchPage,\n        intl = _this$props2.intl;\n    var header = '';\n\n    if (multiColumn) {\n      var columns = this.props.columns;\n      header = /*#__PURE__*/React.createElement(\"nav\", {\n        className: \"drawer__header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/getting-started\",\n        className: \"drawer__tab\",\n        title: intl.formatMessage(messages.start),\n        \"aria-label\": intl.formatMessage(messages.start),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        id: \"bars\",\n        fixedWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 154\n        }\n      })), !columns.some(function (column) {\n        return column.get('id') === 'HOME';\n      }) && /*#__PURE__*/React.createElement(Link, {\n        to: \"/timelines/home\",\n        className: \"drawer__tab\",\n        title: intl.formatMessage(messages.home_timeline),\n        \"aria-label\": intl.formatMessage(messages.home_timeline),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        id: \"home\",\n        fixedWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 171\n        }\n      })), !columns.some(function (column) {\n        return column.get('id') === 'NOTIFICATIONS';\n      }) && /*#__PURE__*/React.createElement(Link, {\n        to: \"/notifications\",\n        className: \"drawer__tab\",\n        title: intl.formatMessage(messages.notifications),\n        \"aria-label\": intl.formatMessage(messages.notifications),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        id: \"bell\",\n        fixedWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 170\n        }\n      })), !columns.some(function (column) {\n        return column.get('id') === 'COMMUNITY';\n      }) && /*#__PURE__*/React.createElement(Link, {\n        to: \"/timelines/public/local\",\n        className: \"drawer__tab\",\n        title: intl.formatMessage(messages.community),\n        \"aria-label\": intl.formatMessage(messages.community),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        id: \"users\",\n        fixedWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 171\n        }\n      })), !columns.some(function (column) {\n        return column.get('id') === 'PUBLIC';\n      }) && /*#__PURE__*/React.createElement(Link, {\n        to: \"/timelines/public\",\n        className: \"drawer__tab\",\n        title: intl.formatMessage(messages.public),\n        \"aria-label\": intl.formatMessage(messages.public),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        id: \"globe\",\n        fixedWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 159\n        }\n      })), /*#__PURE__*/React.createElement(\"a\", {\n        href: \"/settings/preferences\",\n        className: \"drawer__tab\",\n        title: intl.formatMessage(messages.preferences),\n        \"aria-label\": intl.formatMessage(messages.preferences),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        id: \"cog\",\n        fixedWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 170\n        }\n      })), /*#__PURE__*/React.createElement(\"a\", {\n        href: \"/auth/sign_out\",\n        className: \"drawer__tab\",\n        title: intl.formatMessage(messages.logout),\n        \"aria-label\": intl.formatMessage(messages.logout),\n        onClick: this.handleLogoutClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        id: \"sign-out\",\n        fixedWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 186\n        }\n      })));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"drawer\",\n      role: \"region\",\n      \"aria-label\": intl.formatMessage(messages.compose),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 7\n      }\n    }, header, (multiColumn || isSearchPage) && /*#__PURE__*/React.createElement(SearchContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 43\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"drawer__pager\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }\n    }, !isSearchPage && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"drawer__inner\",\n      onFocus: this.onFocus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(NavigationContainer, {\n      onClose: this.onBlur,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(ComposeFormContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"drawer__inner__mastodon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"\",\n      draggable: \"false\",\n      src: mascot || elephantUIPlane,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Motion, {\n      defaultStyle: {\n        x: isSearchPage ? 0 : -100\n      },\n      style: {\n        x: spring(showSearch || isSearchPage ? 0 : -100, {\n          stiffness: 210,\n          damping: 20\n        })\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }\n    }, function (_ref) {\n      var x = _ref.x;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"drawer__inner darker\",\n        style: {\n          transform: \"translateX(\" + x + \"%)\",\n          visibility: x === -100 ? 'hidden' : 'visible'\n        },\n        __self: _this2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(SearchResultsContainer, {\n        __self: _this2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 17\n        }\n      }));\n    })));\n  };\n\n  return Compose;\n}(React.PureComponent), _class2.propTypes = {\n  dispatch: PropTypes.func.isRequired,\n  columns: ImmutablePropTypes.list.isRequired,\n  multiColumn: PropTypes.bool,\n  showSearch: PropTypes.bool,\n  isSearchPage: PropTypes.bool,\n  intl: PropTypes.object.isRequired\n}, _temp)) || _class) || _class);\nexport { Compose as default };","map":{"version":3,"sources":["/home/runner/Mastodon/live/app/javascript/mastodon/features/compose/index.js"],"names":["React","ComposeFormContainer","NavigationContainer","PropTypes","ImmutablePropTypes","connect","mountCompose","unmountCompose","Link","injectIntl","defineMessages","SearchContainer","Motion","spring","SearchResultsContainer","changeComposing","openModal","elephantUIPlane","mascot","Icon","logOut","messages","start","home_timeline","notifications","public","community","preferences","logout","compose","logoutMessage","logoutConfirm","mapStateToProps","state","ownProps","columns","getIn","showSearch","multiColumn","isSearchPage","Compose","handleLogoutClick","e","props","dispatch","intl","preventDefault","stopPropagation","message","formatMessage","confirm","closeWhenConfirm","onConfirm","onFocus","onBlur","componentDidMount","componentWillUnmount","render","header","some","column","get","x","stiffness","damping","transform","visibility","PureComponent","propTypes","func","isRequired","list","bool","object"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ComposeFormContainer from './containers/compose_form_container';\nimport NavigationContainer from './containers/navigation_container';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { connect } from 'react-redux';\nimport { mountCompose, unmountCompose } from '../../actions/compose';\nimport { Link } from 'react-router-dom';\nimport { injectIntl, defineMessages } from 'react-intl';\nimport SearchContainer from './containers/search_container';\nimport Motion from '../ui/util/optional_motion';\nimport spring from 'react-motion/lib/spring';\nimport SearchResultsContainer from './containers/search_results_container';\nimport { changeComposing } from '../../actions/compose';\nimport { openModal } from 'mastodon/actions/modal';\nimport elephantUIPlane from '../../../images/elephant_ui_plane.svg';\nimport { mascot } from '../../initial_state';\nimport Icon from 'mastodon/components/icon';\nimport { logOut } from 'mastodon/utils/log_out';\n\nconst messages = defineMessages({\n  start: { id: 'getting_started.heading', defaultMessage: 'Getting started' },\n  home_timeline: { id: 'tabs_bar.home', defaultMessage: 'Home' },\n  notifications: { id: 'tabs_bar.notifications', defaultMessage: 'Notifications' },\n  public: { id: 'navigation_bar.public_timeline', defaultMessage: 'Federated timeline' },\n  community: { id: 'navigation_bar.community_timeline', defaultMessage: 'Local timeline' },\n  preferences: { id: 'navigation_bar.preferences', defaultMessage: 'Preferences' },\n  logout: { id: 'navigation_bar.logout', defaultMessage: 'Logout' },\n  compose: { id: 'navigation_bar.compose', defaultMessage: 'Compose new toot' },\n  logoutMessage: { id: 'confirmations.logout.message', defaultMessage: 'Are you sure you want to log out?' },\n  logoutConfirm: { id: 'confirmations.logout.confirm', defaultMessage: 'Log out' },\n});\n\nconst mapStateToProps = (state, ownProps) => ({\n  columns: state.getIn(['settings', 'columns']),\n  showSearch: ownProps.multiColumn ? state.getIn(['search', 'submitted']) && !state.getIn(['search', 'hidden']) : ownProps.isSearchPage,\n});\n\nexport default @connect(mapStateToProps)\n@injectIntl\nclass Compose extends React.PureComponent {\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    columns: ImmutablePropTypes.list.isRequired,\n    multiColumn: PropTypes.bool,\n    showSearch: PropTypes.bool,\n    isSearchPage: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n  };\n\n  componentDidMount () {\n    const { isSearchPage } = this.props;\n\n    if (!isSearchPage) {\n      this.props.dispatch(mountCompose());\n    }\n  }\n\n  componentWillUnmount () {\n    const { isSearchPage } = this.props;\n\n    if (!isSearchPage) {\n      this.props.dispatch(unmountCompose());\n    }\n  }\n\n  handleLogoutClick = e => {\n    const { dispatch, intl } = this.props;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    dispatch(openModal('CONFIRM', {\n      message: intl.formatMessage(messages.logoutMessage),\n      confirm: intl.formatMessage(messages.logoutConfirm),\n      closeWhenConfirm: false,\n      onConfirm: () => logOut(),\n    }));\n\n    return false;\n  }\n\n  onFocus = () => {\n    this.props.dispatch(changeComposing(true));\n  }\n\n  onBlur = () => {\n    this.props.dispatch(changeComposing(false));\n  }\n\n  render () {\n    const { multiColumn, showSearch, isSearchPage, intl } = this.props;\n\n    let header = '';\n\n    if (multiColumn) {\n      const { columns } = this.props;\n      header = (\n        <nav className='drawer__header'>\n          <Link to='/getting-started' className='drawer__tab' title={intl.formatMessage(messages.start)} aria-label={intl.formatMessage(messages.start)}><Icon id='bars' fixedWidth /></Link>\n          {!columns.some(column => column.get('id') === 'HOME') && (\n            <Link to='/timelines/home' className='drawer__tab' title={intl.formatMessage(messages.home_timeline)} aria-label={intl.formatMessage(messages.home_timeline)}><Icon id='home' fixedWidth /></Link>\n          )}\n          {!columns.some(column => column.get('id') === 'NOTIFICATIONS') && (\n            <Link to='/notifications' className='drawer__tab' title={intl.formatMessage(messages.notifications)} aria-label={intl.formatMessage(messages.notifications)}><Icon id='bell' fixedWidth /></Link>\n          )}\n          {!columns.some(column => column.get('id') === 'COMMUNITY') && (\n            <Link to='/timelines/public/local' className='drawer__tab' title={intl.formatMessage(messages.community)} aria-label={intl.formatMessage(messages.community)}><Icon id='users' fixedWidth /></Link>\n          )}\n          {!columns.some(column => column.get('id') === 'PUBLIC') && (\n            <Link to='/timelines/public' className='drawer__tab' title={intl.formatMessage(messages.public)} aria-label={intl.formatMessage(messages.public)}><Icon id='globe' fixedWidth /></Link>\n          )}\n          <a href='/settings/preferences' className='drawer__tab' title={intl.formatMessage(messages.preferences)} aria-label={intl.formatMessage(messages.preferences)}><Icon id='cog' fixedWidth /></a>\n          <a href='/auth/sign_out' className='drawer__tab' title={intl.formatMessage(messages.logout)} aria-label={intl.formatMessage(messages.logout)} onClick={this.handleLogoutClick}><Icon id='sign-out' fixedWidth /></a>\n        </nav>\n      );\n    }\n\n    return (\n      <div className='drawer' role='region' aria-label={intl.formatMessage(messages.compose)}>\n        {header}\n\n        {(multiColumn || isSearchPage) && <SearchContainer /> }\n\n        <div className='drawer__pager'>\n          {!isSearchPage && <div className='drawer__inner' onFocus={this.onFocus}>\n            <NavigationContainer onClose={this.onBlur} />\n\n            <ComposeFormContainer />\n\n            <div className='drawer__inner__mastodon'>\n              <img alt='' draggable='false' src={mascot || elephantUIPlane} />\n            </div>\n          </div>}\n\n          <Motion defaultStyle={{ x: isSearchPage ? 0 : -100 }} style={{ x: spring(showSearch || isSearchPage ? 0 : -100, { stiffness: 210, damping: 20 }) }}>\n            {({ x }) => (\n              <div className='drawer__inner darker' style={{ transform: `translateX(${x}%)`, visibility: x === -100 ? 'hidden' : 'visible' }}>\n                <SearchResultsContainer />\n              </div>\n            )}\n          </Motion>\n        </div>\n      </div>\n    );\n  }\n\n}\n"]},"metadata":{"react-intl":{"messages":[{"id":"getting_started.heading","defaultMessage":"Getting started"},{"id":"tabs_bar.home","defaultMessage":"Home"},{"id":"tabs_bar.notifications","defaultMessage":"Notifications"},{"id":"navigation_bar.public_timeline","defaultMessage":"Federated timeline"},{"id":"navigation_bar.community_timeline","defaultMessage":"Local timeline"},{"id":"navigation_bar.preferences","defaultMessage":"Preferences"},{"id":"navigation_bar.logout","defaultMessage":"Logout"},{"id":"navigation_bar.compose","defaultMessage":"Compose new toot"},{"id":"confirmations.logout.message","defaultMessage":"Are you sure you want to log out?"},{"id":"confirmations.logout.confirm","defaultMessage":"Log out"}]}},"sourceType":"module"}