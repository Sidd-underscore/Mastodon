{"ast":null,"code":"var _jsxFileName = \"/home/runner/Mastodon/live/app/javascript/mastodon/components/icon_button.js\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Icon from 'mastodon/components/icon';\nimport AnimatedNumber from 'mastodon/components/animated_number';\n\nvar IconButton = /*#__PURE__*/function (_React$PureComponent) {\n  _inheritsLoose(IconButton, _React$PureComponent);\n\n  function IconButton() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$PureComponent.call.apply(_React$PureComponent, [this].concat(args)) || this;\n    _this.state = {\n      activate: false,\n      deactivate: false\n    };\n\n    _this.handleClick = function (e) {\n      e.preventDefault();\n\n      if (!_this.props.disabled) {\n        _this.props.onClick(e);\n      }\n    };\n\n    _this.handleKeyPress = function (e) {\n      if (_this.props.onKeyPress && !_this.props.disabled) {\n        _this.props.onKeyPress(e);\n      }\n    };\n\n    _this.handleMouseDown = function (e) {\n      if (!_this.props.disabled && _this.props.onMouseDown) {\n        _this.props.onMouseDown(e);\n      }\n    };\n\n    _this.handleKeyDown = function (e) {\n      if (!_this.props.disabled && _this.props.onKeyDown) {\n        _this.props.onKeyDown(e);\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = IconButton.prototype;\n\n  _proto.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if (!nextProps.animate) return;\n\n    if (this.props.active && !nextProps.active) {\n      this.setState({\n        activate: false,\n        deactivate: true\n      });\n    } else if (!this.props.active && nextProps.active) {\n      this.setState({\n        activate: true,\n        deactivate: false\n      });\n    }\n  };\n\n  _proto.render = function render() {\n    var style = _extends({\n      fontSize: this.props.size + \"px\",\n      width: this.props.size * 1.28571429 + \"px\",\n      height: this.props.size * 1.28571429 + \"px\",\n      lineHeight: this.props.size + \"px\"\n    }, this.props.style, this.props.active ? this.props.activeStyle : {});\n\n    var _this$props = this.props,\n        active = _this$props.active,\n        className = _this$props.className,\n        disabled = _this$props.disabled,\n        expanded = _this$props.expanded,\n        icon = _this$props.icon,\n        inverted = _this$props.inverted,\n        overlay = _this$props.overlay,\n        pressed = _this$props.pressed,\n        tabIndex = _this$props.tabIndex,\n        title = _this$props.title,\n        counter = _this$props.counter,\n        obfuscateCount = _this$props.obfuscateCount;\n    var _this$state = this.state,\n        activate = _this$state.activate,\n        deactivate = _this$state.deactivate;\n    var classes = classNames(className, 'icon-button', {\n      active,\n      disabled,\n      inverted,\n      activate,\n      deactivate,\n      overlayed: overlay,\n      'icon-button--with-counter': typeof counter !== 'undefined'\n    });\n\n    if (typeof counter !== 'undefined') {\n      style.width = 'auto';\n    }\n\n    return /*#__PURE__*/React.createElement(\"button\", {\n      \"aria-label\": title,\n      \"aria-pressed\": pressed,\n      \"aria-expanded\": expanded,\n      title: title,\n      className: classes,\n      onClick: this.handleClick,\n      onMouseDown: this.handleMouseDown,\n      onKeyDown: this.handleKeyDown,\n      onKeyPress: this.handleKeyPress,\n      style: style,\n      tabIndex: tabIndex,\n      disabled: disabled,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      id: icon,\n      fixedWidth: true,\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }\n    }), \" \", typeof counter !== 'undefined' && /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-button__counter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 93\n      }\n    }, /*#__PURE__*/React.createElement(AnimatedNumber, {\n      value: counter,\n      obfuscate: obfuscateCount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 132\n      }\n    })));\n  };\n\n  return IconButton;\n}(React.PureComponent);\n\nIconButton.propTypes = {\n  className: PropTypes.string,\n  title: PropTypes.string.isRequired,\n  icon: PropTypes.string.isRequired,\n  onClick: PropTypes.func,\n  onMouseDown: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  onKeyPress: PropTypes.func,\n  size: PropTypes.number,\n  active: PropTypes.bool,\n  pressed: PropTypes.bool,\n  expanded: PropTypes.bool,\n  style: PropTypes.object,\n  activeStyle: PropTypes.object,\n  disabled: PropTypes.bool,\n  inverted: PropTypes.bool,\n  animate: PropTypes.bool,\n  overlay: PropTypes.bool,\n  tabIndex: PropTypes.string,\n  counter: PropTypes.number,\n  obfuscateCount: PropTypes.bool\n};\nIconButton.defaultProps = {\n  size: 18,\n  active: false,\n  disabled: false,\n  animate: false,\n  overlay: false,\n  tabIndex: '0'\n};\nexport { IconButton as default };","map":{"version":3,"sources":["/home/runner/Mastodon/live/app/javascript/mastodon/components/icon_button.js"],"names":["React","PropTypes","classNames","Icon","AnimatedNumber","IconButton","state","activate","deactivate","handleClick","e","preventDefault","props","disabled","onClick","handleKeyPress","onKeyPress","handleMouseDown","onMouseDown","handleKeyDown","onKeyDown","componentWillReceiveProps","nextProps","animate","active","setState","render","style","fontSize","size","width","height","lineHeight","activeStyle","className","expanded","icon","inverted","overlay","pressed","tabIndex","title","counter","obfuscateCount","classes","overlayed","PureComponent","propTypes","string","isRequired","func","number","bool","object","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Icon from 'mastodon/components/icon';\nimport AnimatedNumber from 'mastodon/components/animated_number';\n\nexport default class IconButton extends React.PureComponent {\n\n  static propTypes = {\n    className: PropTypes.string,\n    title: PropTypes.string.isRequired,\n    icon: PropTypes.string.isRequired,\n    onClick: PropTypes.func,\n    onMouseDown: PropTypes.func,\n    onKeyDown: PropTypes.func,\n    onKeyPress: PropTypes.func,\n    size: PropTypes.number,\n    active: PropTypes.bool,\n    pressed: PropTypes.bool,\n    expanded: PropTypes.bool,\n    style: PropTypes.object,\n    activeStyle: PropTypes.object,\n    disabled: PropTypes.bool,\n    inverted: PropTypes.bool,\n    animate: PropTypes.bool,\n    overlay: PropTypes.bool,\n    tabIndex: PropTypes.string,\n    counter: PropTypes.number,\n    obfuscateCount: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    size: 18,\n    active: false,\n    disabled: false,\n    animate: false,\n    overlay: false,\n    tabIndex: '0',\n  };\n\n  state = {\n    activate: false,\n    deactivate: false,\n  }\n\n  componentWillReceiveProps (nextProps) {\n    if (!nextProps.animate) return;\n\n    if (this.props.active && !nextProps.active) {\n      this.setState({ activate: false, deactivate: true });\n    } else if (!this.props.active && nextProps.active) {\n      this.setState({ activate: true, deactivate: false });\n    }\n  }\n\n  handleClick = (e) =>  {\n    e.preventDefault();\n\n    if (!this.props.disabled) {\n      this.props.onClick(e);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (this.props.onKeyPress && !this.props.disabled) {\n      this.props.onKeyPress(e);\n    }\n  }\n\n  handleMouseDown = (e) => {\n    if (!this.props.disabled && this.props.onMouseDown) {\n      this.props.onMouseDown(e);\n    }\n  }\n\n  handleKeyDown = (e) => {\n    if (!this.props.disabled && this.props.onKeyDown) {\n      this.props.onKeyDown(e);\n    }\n  }\n\n  render () {\n    const style = {\n      fontSize: `${this.props.size}px`,\n      width: `${this.props.size * 1.28571429}px`,\n      height: `${this.props.size * 1.28571429}px`,\n      lineHeight: `${this.props.size}px`,\n      ...this.props.style,\n      ...(this.props.active ? this.props.activeStyle : {}),\n    };\n\n    const {\n      active,\n      className,\n      disabled,\n      expanded,\n      icon,\n      inverted,\n      overlay,\n      pressed,\n      tabIndex,\n      title,\n      counter,\n      obfuscateCount,\n    } = this.props;\n\n    const {\n      activate,\n      deactivate,\n    } = this.state;\n\n    const classes = classNames(className, 'icon-button', {\n      active,\n      disabled,\n      inverted,\n      activate,\n      deactivate,\n      overlayed: overlay,\n      'icon-button--with-counter': typeof counter !== 'undefined',\n    });\n\n    if (typeof counter !== 'undefined') {\n      style.width = 'auto';\n    }\n\n    return (\n      <button\n        aria-label={title}\n        aria-pressed={pressed}\n        aria-expanded={expanded}\n        title={title}\n        className={classes}\n        onClick={this.handleClick}\n        onMouseDown={this.handleMouseDown}\n        onKeyDown={this.handleKeyDown}\n        onKeyPress={this.handleKeyPress}\n        style={style}\n        tabIndex={tabIndex}\n        disabled={disabled}\n      >\n        <Icon id={icon} fixedWidth aria-hidden='true' /> {typeof counter !== 'undefined' && <span className='icon-button__counter'><AnimatedNumber value={counter} obfuscate={obfuscateCount} /></span>}\n      </button>\n    );\n  }\n\n}\n"]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}