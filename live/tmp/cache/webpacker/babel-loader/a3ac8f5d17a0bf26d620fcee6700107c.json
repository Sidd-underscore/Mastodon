{"ast":null,"code":"var _jsxFileName = \"/home/runner/Mastodon/live/app/javascript/mastodon/features/compose/components/privacy_dropdown.js\",\n    _class,\n    _class2,\n    _temp;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl, defineMessages } from 'react-intl';\nimport IconButton from '../../../components/icon_button';\nimport Overlay from 'react-overlays/lib/Overlay';\nimport Motion from '../../ui/util/optional_motion';\nimport spring from 'react-motion/lib/spring';\nimport { supportsPassiveEvents } from 'detect-passive-events';\nimport classNames from 'classnames';\nimport Icon from 'mastodon/components/icon';\nvar messages = defineMessages({\n  public_short: {\n    \"id\": \"privacy.public.short\",\n    \"defaultMessage\": \"Public\"\n  },\n  public_long: {\n    \"id\": \"privacy.public.long\",\n    \"defaultMessage\": \"Visible for all, shown in public timelines\"\n  },\n  unlisted_short: {\n    \"id\": \"privacy.unlisted.short\",\n    \"defaultMessage\": \"Unlisted\"\n  },\n  unlisted_long: {\n    \"id\": \"privacy.unlisted.long\",\n    \"defaultMessage\": \"Visible for all, but not in public timelines\"\n  },\n  private_short: {\n    \"id\": \"privacy.private.short\",\n    \"defaultMessage\": \"Followers-only\"\n  },\n  private_long: {\n    \"id\": \"privacy.private.long\",\n    \"defaultMessage\": \"Visible for followers only\"\n  },\n  direct_short: {\n    \"id\": \"privacy.direct.short\",\n    \"defaultMessage\": \"Direct\"\n  },\n  direct_long: {\n    \"id\": \"privacy.direct.long\",\n    \"defaultMessage\": \"Visible for mentioned users only\"\n  },\n  change_privacy: {\n    \"id\": \"privacy.change\",\n    \"defaultMessage\": \"Adjust status privacy\"\n  }\n});\nvar listenerOptions = supportsPassiveEvents ? {\n  passive: true\n} : false;\n\nvar PrivacyDropdownMenu = /*#__PURE__*/function (_React$PureComponent) {\n  _inheritsLoose(PrivacyDropdownMenu, _React$PureComponent);\n\n  function PrivacyDropdownMenu() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$PureComponent.call.apply(_React$PureComponent, [this].concat(args)) || this;\n    _this.state = {\n      mounted: false\n    };\n\n    _this.handleDocumentClick = function (e) {\n      if (_this.node && !_this.node.contains(e.target)) {\n        _this.props.onClose();\n      }\n    };\n\n    _this.handleKeyDown = function (e) {\n      var items = _this.props.items;\n      var value = e.currentTarget.getAttribute('data-index');\n      var index = items.findIndex(function (item) {\n        return item.value === value;\n      });\n      var element = null;\n\n      switch (e.key) {\n        case 'Escape':\n          _this.props.onClose();\n\n          break;\n\n        case 'Enter':\n          _this.handleClick(e);\n\n          break;\n\n        case 'ArrowDown':\n          element = _this.node.childNodes[index + 1] || _this.node.firstChild;\n          break;\n\n        case 'ArrowUp':\n          element = _this.node.childNodes[index - 1] || _this.node.lastChild;\n          break;\n\n        case 'Tab':\n          if (e.shiftKey) {\n            element = _this.node.childNodes[index - 1] || _this.node.lastChild;\n          } else {\n            element = _this.node.childNodes[index + 1] || _this.node.firstChild;\n          }\n\n          break;\n\n        case 'Home':\n          element = _this.node.firstChild;\n          break;\n\n        case 'End':\n          element = _this.node.lastChild;\n          break;\n      }\n\n      if (element) {\n        element.focus();\n\n        _this.props.onChange(element.getAttribute('data-index'));\n\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    };\n\n    _this.handleClick = function (e) {\n      var value = e.currentTarget.getAttribute('data-index');\n      e.preventDefault();\n\n      _this.props.onClose();\n\n      _this.props.onChange(value);\n    };\n\n    _this.setRef = function (c) {\n      _this.node = c;\n    };\n\n    _this.setFocusRef = function (c) {\n      _this.focusedItem = c;\n    };\n\n    return _this;\n  }\n\n  var _proto = PrivacyDropdownMenu.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    document.addEventListener('click', this.handleDocumentClick, false);\n    document.addEventListener('touchend', this.handleDocumentClick, listenerOptions);\n    if (this.focusedItem) this.focusedItem.focus({\n      preventScroll: true\n    });\n    this.setState({\n      mounted: true\n    });\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    document.removeEventListener('click', this.handleDocumentClick, false);\n    document.removeEventListener('touchend', this.handleDocumentClick, listenerOptions);\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var mounted = this.state.mounted;\n    var _this$props = this.props,\n        style = _this$props.style,\n        items = _this$props.items,\n        placement = _this$props.placement,\n        value = _this$props.value;\n    return /*#__PURE__*/React.createElement(Motion, {\n      defaultStyle: {\n        opacity: 0,\n        scaleX: 0.85,\n        scaleY: 0.75\n      },\n      style: {\n        opacity: spring(1, {\n          damping: 35,\n          stiffness: 400\n        }),\n        scaleX: spring(1, {\n          damping: 35,\n          stiffness: 400\n        }),\n        scaleY: spring(1, {\n          damping: 35,\n          stiffness: 400\n        })\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 7\n      }\n    }, function (_ref) {\n      var opacity = _ref.opacity,\n          scaleX = _ref.scaleX,\n          scaleY = _ref.scaleY;\n      return (\n        /*#__PURE__*/\n        // It should not be transformed when mounting because the resulting\n        // size will be used to determine the coordinate of the menu by\n        // react-overlays\n        React.createElement(\"div\", {\n          className: \"privacy-dropdown__dropdown \" + placement,\n          style: _extends({}, style, {\n            opacity: opacity,\n            transform: mounted ? \"scale(\" + scaleX + \", \" + scaleY + \")\" : null\n          }),\n          role: \"listbox\",\n          ref: _this2.setRef,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 11\n          }\n        }, items.map(function (item) {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            role: \"option\",\n            tabIndex: \"0\",\n            key: item.value,\n            \"data-index\": item.value,\n            onKeyDown: _this2.handleKeyDown,\n            onClick: _this2.handleClick,\n            className: classNames('privacy-dropdown__option', {\n              active: item.value === value\n            }),\n            \"aria-selected\": item.value === value,\n            ref: item.value === value ? _this2.setFocusRef : null,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"privacy-dropdown__option__icon\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(Icon, {\n            id: item.icon,\n            fixedWidth: true,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 19\n            }\n          })), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"privacy-dropdown__option__content\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(\"strong\", {\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 19\n            }\n          }, item.text), item.meta));\n        }))\n      );\n    });\n  };\n\n  return PrivacyDropdownMenu;\n}(React.PureComponent);\n\nPrivacyDropdownMenu.propTypes = {\n  style: PropTypes.object,\n  items: PropTypes.array.isRequired,\n  value: PropTypes.string.isRequired,\n  placement: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nvar PrivacyDropdown = injectIntl(_class = (_temp = _class2 = /*#__PURE__*/function (_React$PureComponent2) {\n  _inheritsLoose(PrivacyDropdown, _React$PureComponent2);\n\n  function PrivacyDropdown() {\n    var _this3;\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    _this3 = _React$PureComponent2.call.apply(_React$PureComponent2, [this].concat(args)) || this;\n    _this3.state = {\n      open: false,\n      placement: 'bottom'\n    };\n\n    _this3.handleToggle = function (_ref2) {\n      var target = _ref2.target;\n\n      if (_this3.props.isUserTouching && _this3.props.isUserTouching()) {\n        if (_this3.state.open) {\n          _this3.props.onModalClose();\n        } else {\n          _this3.props.onModalOpen({\n            actions: _this3.options.map(function (option) {\n              return _extends({}, option, {\n                active: option.value === _this3.props.value\n              });\n            }),\n            onClick: _this3.handleModalActionClick\n          });\n        }\n      } else {\n        var _target$getBoundingCl = target.getBoundingClientRect(),\n            top = _target$getBoundingCl.top;\n\n        if (_this3.state.open && _this3.activeElement) {\n          _this3.activeElement.focus({\n            preventScroll: true\n          });\n        }\n\n        _this3.setState({\n          placement: top * 2 < innerHeight ? 'bottom' : 'top'\n        });\n\n        _this3.setState({\n          open: !_this3.state.open\n        });\n      }\n    };\n\n    _this3.handleModalActionClick = function (e) {\n      e.preventDefault();\n\n      var value = _this3.options[e.currentTarget.getAttribute('data-index')].value;\n\n      _this3.props.onModalClose();\n\n      _this3.props.onChange(value);\n    };\n\n    _this3.handleKeyDown = function (e) {\n      switch (e.key) {\n        case 'Escape':\n          _this3.handleClose();\n\n          break;\n      }\n    };\n\n    _this3.handleMouseDown = function () {\n      if (!_this3.state.open) {\n        _this3.activeElement = document.activeElement;\n      }\n    };\n\n    _this3.handleButtonKeyDown = function (e) {\n      switch (e.key) {\n        case ' ':\n        case 'Enter':\n          _this3.handleMouseDown();\n\n          break;\n      }\n    };\n\n    _this3.handleClose = function () {\n      if (_this3.state.open && _this3.activeElement) {\n        _this3.activeElement.focus({\n          preventScroll: true\n        });\n      }\n\n      _this3.setState({\n        open: false\n      });\n    };\n\n    _this3.handleChange = function (value) {\n      _this3.props.onChange(value);\n    };\n\n    return _this3;\n  }\n\n  var _proto2 = PrivacyDropdown.prototype;\n\n  _proto2.componentWillMount = function componentWillMount() {\n    var formatMessage = this.props.intl.formatMessage;\n    this.options = [{\n      icon: 'globe',\n      value: 'public',\n      text: formatMessage(messages.public_short),\n      meta: formatMessage(messages.public_long)\n    }, {\n      icon: 'unlock',\n      value: 'unlisted',\n      text: formatMessage(messages.unlisted_short),\n      meta: formatMessage(messages.unlisted_long)\n    }, {\n      icon: 'lock',\n      value: 'private',\n      text: formatMessage(messages.private_short),\n      meta: formatMessage(messages.private_long)\n    }];\n\n    if (!this.props.noDirect) {\n      this.options.push({\n        icon: 'envelope',\n        value: 'direct',\n        text: formatMessage(messages.direct_short),\n        meta: formatMessage(messages.direct_long)\n      });\n    }\n  };\n\n  _proto2.render = function render() {\n    var _this$props2 = this.props,\n        value = _this$props2.value,\n        container = _this$props2.container,\n        intl = _this$props2.intl;\n    var _this$state = this.state,\n        open = _this$state.open,\n        placement = _this$state.placement;\n    var valueOption = this.options.find(function (item) {\n      return item.value === value;\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames('privacy-dropdown', placement, {\n        active: open\n      }),\n      onKeyDown: this.handleKeyDown,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames('privacy-dropdown__value', {\n        active: this.options.indexOf(valueOption) === (placement === 'bottom' ? 0 : this.options.length - 1)\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      className: \"privacy-dropdown__value-icon\",\n      icon: valueOption.icon,\n      title: intl.formatMessage(messages.change_privacy),\n      size: 18,\n      expanded: open,\n      active: open,\n      inverted: true,\n      onClick: this.handleToggle,\n      onMouseDown: this.handleMouseDown,\n      onKeyDown: this.handleButtonKeyDown,\n      style: {\n        height: null,\n        lineHeight: '27px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Overlay, {\n      show: open,\n      placement: placement,\n      target: this,\n      container: container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(PrivacyDropdownMenu, {\n      items: this.options,\n      value: value,\n      onClose: this.handleClose,\n      onChange: this.handleChange,\n      placement: placement,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 11\n      }\n    })));\n  };\n\n  return PrivacyDropdown;\n}(React.PureComponent), _class2.propTypes = {\n  isUserTouching: PropTypes.func,\n  onModalOpen: PropTypes.func,\n  onModalClose: PropTypes.func,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  noDirect: PropTypes.bool,\n  container: PropTypes.func,\n  intl: PropTypes.object.isRequired\n}, _temp)) || _class;\n\nexport { PrivacyDropdown as default };","map":{"version":3,"sources":["/home/runner/Mastodon/live/app/javascript/mastodon/features/compose/components/privacy_dropdown.js"],"names":["React","PropTypes","injectIntl","defineMessages","IconButton","Overlay","Motion","spring","supportsPassiveEvents","classNames","Icon","messages","public_short","public_long","unlisted_short","unlisted_long","private_short","private_long","direct_short","direct_long","change_privacy","listenerOptions","passive","PrivacyDropdownMenu","state","mounted","handleDocumentClick","e","node","contains","target","props","onClose","handleKeyDown","items","value","currentTarget","getAttribute","index","findIndex","item","element","key","handleClick","childNodes","firstChild","lastChild","shiftKey","focus","onChange","preventDefault","stopPropagation","setRef","c","setFocusRef","focusedItem","componentDidMount","document","addEventListener","preventScroll","setState","componentWillUnmount","removeEventListener","render","style","placement","opacity","scaleX","scaleY","damping","stiffness","transform","map","active","icon","text","meta","PureComponent","propTypes","object","array","isRequired","string","func","PrivacyDropdown","open","handleToggle","isUserTouching","onModalClose","onModalOpen","actions","options","option","onClick","handleModalActionClick","getBoundingClientRect","top","activeElement","innerHeight","handleClose","handleMouseDown","handleButtonKeyDown","handleChange","componentWillMount","formatMessage","intl","noDirect","push","container","valueOption","find","indexOf","length","height","lineHeight","bool"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl, defineMessages } from 'react-intl';\nimport IconButton from '../../../components/icon_button';\nimport Overlay from 'react-overlays/lib/Overlay';\nimport Motion from '../../ui/util/optional_motion';\nimport spring from 'react-motion/lib/spring';\nimport { supportsPassiveEvents } from 'detect-passive-events';\nimport classNames from 'classnames';\nimport Icon from 'mastodon/components/icon';\n\nconst messages = defineMessages({\n  public_short: { id: 'privacy.public.short', defaultMessage: 'Public' },\n  public_long: { id: 'privacy.public.long', defaultMessage: 'Visible for all, shown in public timelines' },\n  unlisted_short: { id: 'privacy.unlisted.short', defaultMessage: 'Unlisted' },\n  unlisted_long: { id: 'privacy.unlisted.long', defaultMessage: 'Visible for all, but not in public timelines' },\n  private_short: { id: 'privacy.private.short', defaultMessage: 'Followers-only' },\n  private_long: { id: 'privacy.private.long', defaultMessage: 'Visible for followers only' },\n  direct_short: { id: 'privacy.direct.short', defaultMessage: 'Direct' },\n  direct_long: { id: 'privacy.direct.long', defaultMessage: 'Visible for mentioned users only' },\n  change_privacy: { id: 'privacy.change', defaultMessage: 'Adjust status privacy' },\n});\n\nconst listenerOptions = supportsPassiveEvents ? { passive: true } : false;\n\nclass PrivacyDropdownMenu extends React.PureComponent {\n\n  static propTypes = {\n    style: PropTypes.object,\n    items: PropTypes.array.isRequired,\n    value: PropTypes.string.isRequired,\n    placement: PropTypes.string.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onChange: PropTypes.func.isRequired,\n  };\n\n  state = {\n    mounted: false,\n  };\n\n  handleDocumentClick = e => {\n    if (this.node && !this.node.contains(e.target)) {\n      this.props.onClose();\n    }\n  }\n\n  handleKeyDown = e => {\n    const { items } = this.props;\n    const value = e.currentTarget.getAttribute('data-index');\n    const index = items.findIndex(item => {\n      return (item.value === value);\n    });\n    let element = null;\n\n    switch(e.key) {\n    case 'Escape':\n      this.props.onClose();\n      break;\n    case 'Enter':\n      this.handleClick(e);\n      break;\n    case 'ArrowDown':\n      element = this.node.childNodes[index + 1] || this.node.firstChild;\n      break;\n    case 'ArrowUp':\n      element = this.node.childNodes[index - 1] || this.node.lastChild;\n      break;\n    case 'Tab':\n      if (e.shiftKey) {\n        element = this.node.childNodes[index - 1] || this.node.lastChild;\n      } else {\n        element = this.node.childNodes[index + 1] || this.node.firstChild;\n      }\n      break;\n    case 'Home':\n      element = this.node.firstChild;\n      break;\n    case 'End':\n      element = this.node.lastChild;\n      break;\n    }\n\n    if (element) {\n      element.focus();\n      this.props.onChange(element.getAttribute('data-index'));\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  handleClick = e => {\n    const value = e.currentTarget.getAttribute('data-index');\n\n    e.preventDefault();\n\n    this.props.onClose();\n    this.props.onChange(value);\n  }\n\n  componentDidMount () {\n    document.addEventListener('click', this.handleDocumentClick, false);\n    document.addEventListener('touchend', this.handleDocumentClick, listenerOptions);\n    if (this.focusedItem) this.focusedItem.focus({ preventScroll: true });\n    this.setState({ mounted: true });\n  }\n\n  componentWillUnmount () {\n    document.removeEventListener('click', this.handleDocumentClick, false);\n    document.removeEventListener('touchend', this.handleDocumentClick, listenerOptions);\n  }\n\n  setRef = c => {\n    this.node = c;\n  }\n\n  setFocusRef = c => {\n    this.focusedItem = c;\n  }\n\n  render () {\n    const { mounted } = this.state;\n    const { style, items, placement, value } = this.props;\n\n    return (\n      <Motion defaultStyle={{ opacity: 0, scaleX: 0.85, scaleY: 0.75 }} style={{ opacity: spring(1, { damping: 35, stiffness: 400 }), scaleX: spring(1, { damping: 35, stiffness: 400 }), scaleY: spring(1, { damping: 35, stiffness: 400 }) }}>\n        {({ opacity, scaleX, scaleY }) => (\n          // It should not be transformed when mounting because the resulting\n          // size will be used to determine the coordinate of the menu by\n          // react-overlays\n          <div className={`privacy-dropdown__dropdown ${placement}`} style={{ ...style, opacity: opacity, transform: mounted ? `scale(${scaleX}, ${scaleY})` : null }} role='listbox' ref={this.setRef}>\n            {items.map(item => (\n              <div role='option' tabIndex='0' key={item.value} data-index={item.value} onKeyDown={this.handleKeyDown} onClick={this.handleClick} className={classNames('privacy-dropdown__option', { active: item.value === value })} aria-selected={item.value === value} ref={item.value === value ? this.setFocusRef : null}>\n                <div className='privacy-dropdown__option__icon'>\n                  <Icon id={item.icon} fixedWidth />\n                </div>\n\n                <div className='privacy-dropdown__option__content'>\n                  <strong>{item.text}</strong>\n                  {item.meta}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </Motion>\n    );\n  }\n\n}\n\nexport default @injectIntl\nclass PrivacyDropdown extends React.PureComponent {\n\n  static propTypes = {\n    isUserTouching: PropTypes.func,\n    onModalOpen: PropTypes.func,\n    onModalClose: PropTypes.func,\n    value: PropTypes.string.isRequired,\n    onChange: PropTypes.func.isRequired,\n    noDirect: PropTypes.bool,\n    container: PropTypes.func,\n    intl: PropTypes.object.isRequired,\n  };\n\n  state = {\n    open: false,\n    placement: 'bottom',\n  };\n\n  handleToggle = ({ target }) => {\n    if (this.props.isUserTouching && this.props.isUserTouching()) {\n      if (this.state.open) {\n        this.props.onModalClose();\n      } else {\n        this.props.onModalOpen({\n          actions: this.options.map(option => ({ ...option, active: option.value === this.props.value })),\n          onClick: this.handleModalActionClick,\n        });\n      }\n    } else {\n      const { top } = target.getBoundingClientRect();\n      if (this.state.open && this.activeElement) {\n        this.activeElement.focus({ preventScroll: true });\n      }\n      this.setState({ placement: top * 2 < innerHeight ? 'bottom' : 'top' });\n      this.setState({ open: !this.state.open });\n    }\n  }\n\n  handleModalActionClick = (e) => {\n    e.preventDefault();\n\n    const { value } = this.options[e.currentTarget.getAttribute('data-index')];\n\n    this.props.onModalClose();\n    this.props.onChange(value);\n  }\n\n  handleKeyDown = e => {\n    switch(e.key) {\n    case 'Escape':\n      this.handleClose();\n      break;\n    }\n  }\n\n  handleMouseDown = () => {\n    if (!this.state.open) {\n      this.activeElement = document.activeElement;\n    }\n  }\n\n  handleButtonKeyDown = (e) => {\n    switch(e.key) {\n    case ' ':\n    case 'Enter':\n      this.handleMouseDown();\n      break;\n    }\n  }\n\n  handleClose = () => {\n    if (this.state.open && this.activeElement) {\n      this.activeElement.focus({ preventScroll: true });\n    }\n    this.setState({ open: false });\n  }\n\n  handleChange = value => {\n    this.props.onChange(value);\n  }\n\n  componentWillMount () {\n    const { intl: { formatMessage } } = this.props;\n\n    this.options = [\n      { icon: 'globe', value: 'public', text: formatMessage(messages.public_short), meta: formatMessage(messages.public_long) },\n      { icon: 'unlock', value: 'unlisted', text: formatMessage(messages.unlisted_short), meta: formatMessage(messages.unlisted_long) },\n      { icon: 'lock', value: 'private', text: formatMessage(messages.private_short), meta: formatMessage(messages.private_long) },\n    ];\n\n    if (!this.props.noDirect) {\n      this.options.push(\n        { icon: 'envelope', value: 'direct', text: formatMessage(messages.direct_short), meta: formatMessage(messages.direct_long) },\n      );\n    }\n  }\n\n  render () {\n    const { value, container, intl } = this.props;\n    const { open, placement } = this.state;\n\n    const valueOption = this.options.find(item => item.value === value);\n\n    return (\n      <div className={classNames('privacy-dropdown', placement, { active: open })} onKeyDown={this.handleKeyDown}>\n        <div className={classNames('privacy-dropdown__value', { active: this.options.indexOf(valueOption) === (placement === 'bottom' ? 0 : (this.options.length - 1)) })}>\n          <IconButton\n            className='privacy-dropdown__value-icon'\n            icon={valueOption.icon}\n            title={intl.formatMessage(messages.change_privacy)}\n            size={18}\n            expanded={open}\n            active={open}\n            inverted\n            onClick={this.handleToggle}\n            onMouseDown={this.handleMouseDown}\n            onKeyDown={this.handleButtonKeyDown}\n            style={{ height: null, lineHeight: '27px' }}\n          />\n        </div>\n\n        <Overlay show={open} placement={placement} target={this} container={container}>\n          <PrivacyDropdownMenu\n            items={this.options}\n            value={value}\n            onClose={this.handleClose}\n            onChange={this.handleChange}\n            placement={placement}\n          />\n        </Overlay>\n      </div>\n    );\n  }\n\n}\n"]},"metadata":{"react-intl":{"messages":[{"id":"privacy.public.short","defaultMessage":"Public"},{"id":"privacy.public.long","defaultMessage":"Visible for all, shown in public timelines"},{"id":"privacy.unlisted.short","defaultMessage":"Unlisted"},{"id":"privacy.unlisted.long","defaultMessage":"Visible for all, but not in public timelines"},{"id":"privacy.private.short","defaultMessage":"Followers-only"},{"id":"privacy.private.long","defaultMessage":"Visible for followers only"},{"id":"privacy.direct.short","defaultMessage":"Direct"},{"id":"privacy.direct.long","defaultMessage":"Visible for mentioned users only"},{"id":"privacy.change","defaultMessage":"Adjust status privacy"}]}},"sourceType":"module"}