{"ast":null,"code":"var _jsxFileName = \"/home/runner/Mastodon/live/app/javascript/packs/public.js\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport './public-path';\nimport escapeTextContentForBrowser from 'escape-html';\nimport loadPolyfills from '../mastodon/load_polyfills';\nimport ready from '../mastodon/ready';\nimport { start } from '../mastodon/common';\nimport loadKeyboardExtensions from '../mastodon/load_keyboard_extensions';\nstart();\nwindow.addEventListener('message', function (e) {\n  var data = e.data || {};\n\n  if (!window.parent || data.type !== 'setHeight') {\n    return;\n  }\n\n  ready(function () {\n    window.parent.postMessage({\n      type: 'setHeight',\n      id: data.id,\n      height: document.getElementsByTagName('html')[0].scrollHeight\n    }, '*');\n  });\n});\n\nfunction main() {\n  var _this = this;\n\n  var IntlMessageFormat = require('intl-messageformat').default;\n\n  var _require = require('../mastodon/components/relative_timestamp'),\n      timeAgoString = _require.timeAgoString;\n\n  var _require2 = require('@rails/ujs'),\n      delegate = _require2.delegate;\n\n  var emojify = require('../mastodon/features/emoji/emoji').default;\n\n  var _require3 = require('../mastodon/locales'),\n      getLocale = _require3.getLocale;\n\n  var _getLocale = getLocale(),\n      messages = _getLocale.messages;\n\n  var React = require('react');\n\n  var ReactDOM = require('react-dom');\n\n  var Rellax = require('rellax');\n\n  var _require4 = require('history'),\n      createBrowserHistory = _require4.createBrowserHistory;\n\n  var scrollToDetailedStatus = function scrollToDetailedStatus() {\n    var history = createBrowserHistory();\n    var detailedStatuses = document.querySelectorAll('.public-layout .detailed-status');\n    var location = history.location;\n\n    if (detailedStatuses.length === 1 && (!location.state || !location.state.scrolledToDetailedStatus)) {\n      detailedStatuses[0].scrollIntoView();\n      history.replace(location.pathname, _extends({}, location.state, {\n        scrolledToDetailedStatus: true\n      }));\n    }\n  };\n\n  var getEmojiAnimationHandler = function getEmojiAnimationHandler(swapTo) {\n    return function (_ref) {\n      var target = _ref.target;\n      target.src = target.getAttribute(swapTo);\n    };\n  };\n\n  ready(function () {\n    var locale = document.documentElement.lang;\n    var dateTimeFormat = new Intl.DateTimeFormat(locale, {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: 'numeric',\n      minute: 'numeric'\n    });\n    [].forEach.call(document.querySelectorAll('.emojify'), function (content) {\n      content.innerHTML = emojify(content.innerHTML);\n    });\n    [].forEach.call(document.querySelectorAll('time.formatted'), function (content) {\n      var datetime = new Date(content.getAttribute('datetime'));\n      var formattedDate = dateTimeFormat.format(datetime);\n      content.title = formattedDate;\n      content.textContent = formattedDate;\n    });\n    [].forEach.call(document.querySelectorAll('time.time-ago'), function (content) {\n      var datetime = new Date(content.getAttribute('datetime'));\n      var now = new Date();\n      content.title = dateTimeFormat.format(datetime);\n      content.textContent = timeAgoString({\n        formatMessage: function formatMessage(_ref2, values) {\n          var id = _ref2.id,\n              defaultMessage = _ref2.defaultMessage;\n          return new IntlMessageFormat(messages[id] || defaultMessage, locale).format(values);\n        },\n        formatDate: function formatDate(date, options) {\n          return new Intl.DateTimeFormat(locale, options).format(date);\n        }\n      }, datetime, now, now.getFullYear(), content.getAttribute('datetime').includes('T'));\n    });\n    var reactComponents = document.querySelectorAll('[data-component]');\n\n    if (reactComponents.length > 0) {\n      import(\n      /* webpackChunkName: \"containers/media_container\" */\n      '../mastodon/containers/media_container').then(function (_ref3) {\n        var MediaContainer = _ref3.default;\n        [].forEach.call(reactComponents, function (component) {\n          [].forEach.call(component.children, function (child) {\n            component.removeChild(child);\n          });\n        });\n        var content = document.createElement('div');\n        ReactDOM.render( /*#__PURE__*/React.createElement(MediaContainer, {\n          locale: locale,\n          components: reactComponents,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 27\n          }\n        }), content);\n        document.body.appendChild(content);\n        scrollToDetailedStatus();\n      }).catch(function (error) {\n        console.error(error);\n        scrollToDetailedStatus();\n      });\n    } else {\n      scrollToDetailedStatus();\n    }\n\n    var parallaxComponents = document.querySelectorAll('.parallax');\n\n    if (parallaxComponents.length > 0) {\n      new Rellax('.parallax', {\n        speed: -1\n      });\n    }\n\n    delegate(document, '#registration_user_password_confirmation,#registration_user_password', 'input', function () {\n      var password = document.getElementById('registration_user_password');\n      var confirmation = document.getElementById('registration_user_password_confirmation');\n\n      if (password.value && password.value !== confirmation.value) {\n        confirmation.setCustomValidity(new IntlMessageFormat(messages['password_confirmation.mismatching'] || 'Password confirmation does not match', locale).format());\n      } else {\n        confirmation.setCustomValidity('');\n      }\n    });\n    delegate(document, '#user_password,#user_password_confirmation', 'input', function () {\n      var password = document.getElementById('user_password');\n      var confirmation = document.getElementById('user_password_confirmation');\n      if (!confirmation) return;\n\n      if (password.value && password.value !== confirmation.value) {\n        confirmation.setCustomValidity(new IntlMessageFormat(messages['password_confirmation.mismatching'] || 'Password confirmation does not match', locale).format());\n      } else {\n        confirmation.setCustomValidity('');\n      }\n    });\n    delegate(document, '.custom-emoji', 'mouseover', getEmojiAnimationHandler('data-original'));\n    delegate(document, '.custom-emoji', 'mouseout', getEmojiAnimationHandler('data-static'));\n    delegate(document, '.status__content__spoiler-link', 'click', function () {\n      var statusEl = this.parentNode.parentNode;\n\n      if (statusEl.dataset.spoiler === 'expanded') {\n        statusEl.dataset.spoiler = 'folded';\n        this.textContent = new IntlMessageFormat(messages['status.show_more'] || 'Show more', locale).format();\n      } else {\n        statusEl.dataset.spoiler = 'expanded';\n        this.textContent = new IntlMessageFormat(messages['status.show_less'] || 'Show less', locale).format();\n      }\n\n      return false;\n    });\n    [].forEach.call(document.querySelectorAll('.status__content__spoiler-link'), function (spoilerLink) {\n      var statusEl = spoilerLink.parentNode.parentNode;\n      var message = statusEl.dataset.spoiler === 'expanded' ? messages['status.show_less'] || 'Show less' : messages['status.show_more'] || 'Show more';\n      spoilerLink.textContent = new IntlMessageFormat(message, locale).format();\n    });\n  });\n  delegate(document, '.webapp-btn', 'click', function (_ref4) {\n    var target = _ref4.target,\n        button = _ref4.button;\n\n    if (button !== 0) {\n      return true;\n    }\n\n    window.location.href = target.href;\n    return false;\n  });\n  delegate(document, '.modal-button', 'click', function (e) {\n    e.preventDefault();\n    var href;\n\n    if (e.target.nodeName !== 'A') {\n      href = e.target.parentNode.href;\n    } else {\n      href = e.target.href;\n    }\n\n    window.open(href, 'mastodon-intent', 'width=445,height=600,resizable=no,menubar=no,status=no,scrollbars=yes');\n  });\n  delegate(document, '#account_display_name', 'input', function (_ref5) {\n    var target = _ref5.target;\n    var name = document.querySelector('.card .display-name strong');\n\n    if (name) {\n      if (target.value) {\n        name.innerHTML = emojify(escapeTextContentForBrowser(target.value));\n      } else {\n        name.textContent = target.dataset.default;\n      }\n    }\n  });\n  delegate(document, '#account_avatar', 'change', function (_ref6) {\n    var target = _ref6.target;\n    var avatar = document.querySelector('.card .avatar img');\n\n    var _ref7 = target.files || [],\n        file = _ref7[0];\n\n    var url = file ? URL.createObjectURL(file) : avatar.dataset.originalSrc;\n    avatar.src = url;\n  });\n\n  var getProfileAvatarAnimationHandler = function getProfileAvatarAnimationHandler(swapTo) {\n    //animate avatar gifs on the profile page when moused over\n    return function (_ref8) {\n      var target = _ref8.target;\n      var swapSrc = target.getAttribute(swapTo); //only change the img source if autoplay is off and the image src is actually different\n\n      if (target.getAttribute('data-autoplay') !== 'true' && target.src !== swapSrc) {\n        target.src = swapSrc;\n      }\n    };\n  };\n\n  delegate(document, 'img#profile_page_avatar', 'mouseover', getProfileAvatarAnimationHandler('data-original'));\n  delegate(document, 'img#profile_page_avatar', 'mouseout', getProfileAvatarAnimationHandler('data-static'));\n  delegate(document, '#account_header', 'change', function (_ref9) {\n    var target = _ref9.target;\n    var header = document.querySelector('.card .card__img img');\n\n    var _ref10 = target.files || [],\n        file = _ref10[0];\n\n    var url = file ? URL.createObjectURL(file) : header.dataset.originalSrc;\n    header.src = url;\n  });\n  delegate(document, '#account_locked', 'change', function (_ref11) {\n    var target = _ref11.target;\n    var lock = document.querySelector('.card .display-name i');\n\n    if (lock) {\n      if (target.checked) {\n        delete lock.dataset.hidden;\n      } else {\n        lock.dataset.hidden = 'true';\n      }\n    }\n  });\n  delegate(document, '.input-copy input', 'click', function (_ref12) {\n    var target = _ref12.target;\n    target.focus();\n    target.select();\n    target.setSelectionRange(0, target.value.length);\n  });\n  delegate(document, '.input-copy button', 'click', function (_ref13) {\n    var target = _ref13.target;\n    var input = target.parentNode.querySelector('.input-copy__wrapper input');\n    var oldReadOnly = input.readonly;\n    input.readonly = false;\n    input.focus();\n    input.select();\n    input.setSelectionRange(0, input.value.length);\n\n    try {\n      if (document.execCommand('copy')) {\n        input.blur();\n        target.parentNode.classList.add('copied');\n        setTimeout(function () {\n          target.parentNode.classList.remove('copied');\n        }, 700);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n\n    input.readonly = oldReadOnly;\n  });\n  delegate(document, '.sidebar__toggle__icon', 'click', function () {\n    var target = document.querySelector('.sidebar ul');\n\n    if (target.style.display === 'block') {\n      target.style.display = 'none';\n    } else {\n      target.style.display = 'block';\n    }\n  }); // Empty the honeypot fields in JS in case something like an extension\n  // automatically filled them.\n\n  delegate(document, '#registration_new_user,#new_user', 'submit', function () {\n    ['user_website', 'user_confirm_password', 'registration_user_website', 'registration_user_confirm_password'].forEach(function (id) {\n      var field = document.getElementById(id);\n\n      if (field) {\n        field.value = '';\n      }\n    });\n  });\n}\n\nloadPolyfills().then(main).then(loadKeyboardExtensions).catch(function (error) {\n  console.error(error);\n});","map":{"version":3,"sources":["/home/runner/Mastodon/live/app/javascript/packs/public.js"],"names":["escapeTextContentForBrowser","loadPolyfills","ready","start","loadKeyboardExtensions","window","addEventListener","e","data","parent","type","postMessage","id","height","document","getElementsByTagName","scrollHeight","main","IntlMessageFormat","require","default","timeAgoString","delegate","emojify","getLocale","messages","React","ReactDOM","Rellax","createBrowserHistory","scrollToDetailedStatus","history","detailedStatuses","querySelectorAll","location","length","state","scrolledToDetailedStatus","scrollIntoView","replace","pathname","getEmojiAnimationHandler","swapTo","target","src","getAttribute","locale","documentElement","lang","dateTimeFormat","Intl","DateTimeFormat","year","month","day","hour","minute","forEach","call","content","innerHTML","datetime","Date","formattedDate","format","title","textContent","now","formatMessage","values","defaultMessage","formatDate","date","options","getFullYear","includes","reactComponents","then","MediaContainer","component","children","child","removeChild","createElement","render","body","appendChild","catch","error","console","parallaxComponents","speed","password","getElementById","confirmation","value","setCustomValidity","statusEl","parentNode","dataset","spoiler","spoilerLink","message","button","href","preventDefault","nodeName","open","name","querySelector","avatar","files","file","url","URL","createObjectURL","originalSrc","getProfileAvatarAnimationHandler","swapSrc","header","lock","checked","hidden","focus","select","setSelectionRange","input","oldReadOnly","readonly","execCommand","blur","classList","add","setTimeout","remove","err","style","display","field"],"mappings":"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","sourcesContent":["import './public-path';\nimport escapeTextContentForBrowser from 'escape-html';\nimport loadPolyfills from '../mastodon/load_polyfills';\nimport ready from '../mastodon/ready';\nimport { start } from '../mastodon/common';\nimport loadKeyboardExtensions from '../mastodon/load_keyboard_extensions';\n\nstart();\n\nwindow.addEventListener('message', e => {\n  const data = e.data || {};\n\n  if (!window.parent || data.type !== 'setHeight') {\n    return;\n  }\n\n  ready(() => {\n    window.parent.postMessage({\n      type: 'setHeight',\n      id: data.id,\n      height: document.getElementsByTagName('html')[0].scrollHeight,\n    }, '*');\n  });\n});\n\nfunction main() {\n  const IntlMessageFormat = require('intl-messageformat').default;\n  const { timeAgoString } = require('../mastodon/components/relative_timestamp');\n  const { delegate } = require('@rails/ujs');\n  const emojify = require('../mastodon/features/emoji/emoji').default;\n  const { getLocale } = require('../mastodon/locales');\n  const { messages } = getLocale();\n  const React = require('react');\n  const ReactDOM = require('react-dom');\n  const Rellax = require('rellax');\n  const { createBrowserHistory } = require('history');\n\n  const scrollToDetailedStatus = () => {\n    const history = createBrowserHistory();\n    const detailedStatuses = document.querySelectorAll('.public-layout .detailed-status');\n    const location = history.location;\n\n    if (detailedStatuses.length === 1 && (!location.state || !location.state.scrolledToDetailedStatus)) {\n      detailedStatuses[0].scrollIntoView();\n      history.replace(location.pathname, { ...location.state, scrolledToDetailedStatus: true });\n    }\n  };\n\n  const getEmojiAnimationHandler = (swapTo) => {\n    return ({ target }) => {\n      target.src = target.getAttribute(swapTo);\n    };\n  };\n\n  ready(() => {\n    const locale = document.documentElement.lang;\n\n    const dateTimeFormat = new Intl.DateTimeFormat(locale, {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: 'numeric',\n      minute: 'numeric',\n    });\n\n    [].forEach.call(document.querySelectorAll('.emojify'), (content) => {\n      content.innerHTML = emojify(content.innerHTML);\n    });\n\n    [].forEach.call(document.querySelectorAll('time.formatted'), (content) => {\n      const datetime = new Date(content.getAttribute('datetime'));\n      const formattedDate = dateTimeFormat.format(datetime);\n\n      content.title = formattedDate;\n      content.textContent = formattedDate;\n    });\n\n    [].forEach.call(document.querySelectorAll('time.time-ago'), (content) => {\n      const datetime = new Date(content.getAttribute('datetime'));\n      const now      = new Date();\n\n      content.title = dateTimeFormat.format(datetime);\n      content.textContent = timeAgoString({\n        formatMessage: ({ id, defaultMessage }, values) => (new IntlMessageFormat(messages[id] || defaultMessage, locale)).format(values),\n        formatDate: (date, options) => (new Intl.DateTimeFormat(locale, options)).format(date),\n      }, datetime, now, now.getFullYear(), content.getAttribute('datetime').includes('T'));\n    });\n\n    const reactComponents = document.querySelectorAll('[data-component]');\n\n    if (reactComponents.length > 0) {\n      import(/* webpackChunkName: \"containers/media_container\" */ '../mastodon/containers/media_container')\n        .then(({ default: MediaContainer }) => {\n          [].forEach.call(reactComponents, (component) => {\n            [].forEach.call(component.children, (child) => {\n              component.removeChild(child);\n            });\n          });\n\n          const content = document.createElement('div');\n\n          ReactDOM.render(<MediaContainer locale={locale} components={reactComponents} />, content);\n          document.body.appendChild(content);\n          scrollToDetailedStatus();\n        })\n        .catch(error => {\n          console.error(error);\n          scrollToDetailedStatus();\n        });\n    } else {\n      scrollToDetailedStatus();\n    }\n\n    const parallaxComponents = document.querySelectorAll('.parallax');\n\n    if (parallaxComponents.length > 0 ) {\n      new Rellax('.parallax', { speed: -1 });\n    }\n\n    delegate(document, '#registration_user_password_confirmation,#registration_user_password', 'input', () => {\n      const password = document.getElementById('registration_user_password');\n      const confirmation = document.getElementById('registration_user_password_confirmation');\n      if (password.value && password.value !== confirmation.value) {\n        confirmation.setCustomValidity((new IntlMessageFormat(messages['password_confirmation.mismatching'] || 'Password confirmation does not match', locale)).format());\n      } else {\n        confirmation.setCustomValidity('');\n      }\n    });\n\n    delegate(document, '#user_password,#user_password_confirmation', 'input', () => {\n      const password = document.getElementById('user_password');\n      const confirmation = document.getElementById('user_password_confirmation');\n      if (!confirmation) return;\n\n      if (password.value && password.value !== confirmation.value) {\n        confirmation.setCustomValidity((new IntlMessageFormat(messages['password_confirmation.mismatching'] || 'Password confirmation does not match', locale)).format());\n      } else {\n        confirmation.setCustomValidity('');\n      }\n    });\n\n    delegate(document, '.custom-emoji', 'mouseover', getEmojiAnimationHandler('data-original'));\n    delegate(document, '.custom-emoji', 'mouseout', getEmojiAnimationHandler('data-static'));\n\n    delegate(document, '.status__content__spoiler-link', 'click', function() {\n      const statusEl = this.parentNode.parentNode;\n\n      if (statusEl.dataset.spoiler === 'expanded') {\n        statusEl.dataset.spoiler = 'folded';\n        this.textContent = (new IntlMessageFormat(messages['status.show_more'] || 'Show more', locale)).format();\n      } else {\n        statusEl.dataset.spoiler = 'expanded';\n        this.textContent = (new IntlMessageFormat(messages['status.show_less'] || 'Show less', locale)).format();\n      }\n\n      return false;\n    });\n\n    [].forEach.call(document.querySelectorAll('.status__content__spoiler-link'), (spoilerLink) => {\n      const statusEl = spoilerLink.parentNode.parentNode;\n      const message = (statusEl.dataset.spoiler === 'expanded') ? (messages['status.show_less'] || 'Show less') : (messages['status.show_more'] || 'Show more');\n      spoilerLink.textContent = (new IntlMessageFormat(message, locale)).format();\n    });\n  });\n\n  delegate(document, '.webapp-btn', 'click', ({ target, button }) => {\n    if (button !== 0) {\n      return true;\n    }\n    window.location.href = target.href;\n    return false;\n  });\n\n  delegate(document, '.modal-button', 'click', e => {\n    e.preventDefault();\n\n    let href;\n\n    if (e.target.nodeName !== 'A') {\n      href = e.target.parentNode.href;\n    } else {\n      href = e.target.href;\n    }\n\n    window.open(href, 'mastodon-intent', 'width=445,height=600,resizable=no,menubar=no,status=no,scrollbars=yes');\n  });\n\n  delegate(document, '#account_display_name', 'input', ({ target }) => {\n    const name = document.querySelector('.card .display-name strong');\n    if (name) {\n      if (target.value) {\n        name.innerHTML = emojify(escapeTextContentForBrowser(target.value));\n      } else {\n        name.textContent = target.dataset.default;\n      }\n    }\n  });\n\n  delegate(document, '#account_avatar', 'change', ({ target }) => {\n    const avatar = document.querySelector('.card .avatar img');\n    const [file] = target.files || [];\n    const url = file ? URL.createObjectURL(file) : avatar.dataset.originalSrc;\n\n    avatar.src = url;\n  });\n\n  const getProfileAvatarAnimationHandler = (swapTo) => {\n    //animate avatar gifs on the profile page when moused over\n    return ({ target }) => {\n      const swapSrc = target.getAttribute(swapTo);\n      //only change the img source if autoplay is off and the image src is actually different\n      if(target.getAttribute('data-autoplay') !== 'true' && target.src !== swapSrc) {\n        target.src = swapSrc;\n      }\n    };\n  };\n\n  delegate(document, 'img#profile_page_avatar', 'mouseover', getProfileAvatarAnimationHandler('data-original'));\n\n  delegate(document, 'img#profile_page_avatar', 'mouseout', getProfileAvatarAnimationHandler('data-static'));\n\n  delegate(document, '#account_header', 'change', ({ target }) => {\n    const header = document.querySelector('.card .card__img img');\n    const [file] = target.files || [];\n    const url = file ? URL.createObjectURL(file) : header.dataset.originalSrc;\n\n    header.src = url;\n  });\n\n  delegate(document, '#account_locked', 'change', ({ target }) => {\n    const lock = document.querySelector('.card .display-name i');\n\n    if (lock) {\n      if (target.checked) {\n        delete lock.dataset.hidden;\n      } else {\n        lock.dataset.hidden = 'true';\n      }\n    }\n  });\n\n  delegate(document, '.input-copy input', 'click', ({ target }) => {\n    target.focus();\n    target.select();\n    target.setSelectionRange(0, target.value.length);\n  });\n\n  delegate(document, '.input-copy button', 'click', ({ target }) => {\n    const input = target.parentNode.querySelector('.input-copy__wrapper input');\n\n    const oldReadOnly = input.readonly;\n\n    input.readonly = false;\n    input.focus();\n    input.select();\n    input.setSelectionRange(0, input.value.length);\n\n    try {\n      if (document.execCommand('copy')) {\n        input.blur();\n        target.parentNode.classList.add('copied');\n\n        setTimeout(() => {\n          target.parentNode.classList.remove('copied');\n        }, 700);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n\n    input.readonly = oldReadOnly;\n  });\n\n  delegate(document, '.sidebar__toggle__icon', 'click', () => {\n    const target = document.querySelector('.sidebar ul');\n\n    if (target.style.display === 'block') {\n      target.style.display = 'none';\n    } else {\n      target.style.display = 'block';\n    }\n  });\n\n  // Empty the honeypot fields in JS in case something like an extension\n  // automatically filled them.\n  delegate(document, '#registration_new_user,#new_user', 'submit', () => {\n    ['user_website', 'user_confirm_password', 'registration_user_website', 'registration_user_confirm_password'].forEach(id => {\n      const field = document.getElementById(id);\n      if (field) {\n        field.value = '';\n      }\n    });\n  });\n}\n\nloadPolyfills()\n  .then(main)\n  .then(loadKeyboardExtensions)\n  .catch(error => {\n    console.error(error);\n  });\n"]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}