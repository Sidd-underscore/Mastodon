{"ast":null,"code":"var _jsxFileName = \"/home/runner/Mastodon/live/app/javascript/mastodon/features/compose/containers/warning_container.js\",\n    _this = this;\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Warning from '../components/warning';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\nimport { me } from '../../../initial_state';\n\nvar buildHashtagRE = function buildHashtagRE() {\n  try {\n    var HASHTAG_SEPARATORS = '_\\\\u00b7\\\\u200c';\n    var ALPHA = '\\\\p{L}\\\\p{M}';\n    var WORD = '\\\\p{L}\\\\p{M}\\\\p{N}\\\\p{Pc}';\n    return new RegExp('(?:^|[^\\\\/\\\\)\\\\w])#((' + '[' + WORD + '_]' + '[' + WORD + HASHTAG_SEPARATORS + ']*' + '[' + ALPHA + HASHTAG_SEPARATORS + ']' + '[' + WORD + HASHTAG_SEPARATORS + ']*' + '[' + WORD + '_]' + ')|(' + '[' + WORD + '_]*' + '[' + ALPHA + ']' + '[' + WORD + '_]*' + '))', 'iu');\n  } catch (_unused) {\n    return /(?:^|[^\\/\\)\\w])#(\\w*[a-zA-Z·]\\w*)/i;\n  }\n};\n\nvar APPROX_HASHTAG_RE = buildHashtagRE();\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    needsLockWarning: state.getIn(['compose', 'privacy']) === 'private' && !state.getIn(['accounts', me, 'locked']),\n    hashtagWarning: state.getIn(['compose', 'privacy']) !== 'public' && APPROX_HASHTAG_RE.test(state.getIn(['compose', 'text'])),\n    directMessageWarning: state.getIn(['compose', 'privacy']) === 'direct'\n  };\n};\n\nvar WarningWrapper = function WarningWrapper(_ref) {\n  var needsLockWarning = _ref.needsLockWarning,\n      hashtagWarning = _ref.hashtagWarning,\n      directMessageWarning = _ref.directMessageWarning;\n\n  if (needsLockWarning) {\n    return /*#__PURE__*/React.createElement(Warning, {\n      message: /*#__PURE__*/React.createElement(FormattedMessage, {\n        id: \"compose_form.lock_disclaimer\",\n        defaultMessage: \"Your account is not {locked}. Anyone can follow you to view your follower-only posts.\",\n        values: {\n          locked: /*#__PURE__*/React.createElement(\"a\", {\n            href: \"/settings/profile\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 203\n            }\n          }, /*#__PURE__*/React.createElement(FormattedMessage, {\n            id: \"compose_form.lock_disclaimer.lock\",\n            defaultMessage: \"locked\",\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 231\n            }\n          }))\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 30\n        }\n      }),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 12\n      }\n    });\n  }\n\n  if (hashtagWarning) {\n    return /*#__PURE__*/React.createElement(Warning, {\n      message: /*#__PURE__*/React.createElement(FormattedMessage, {\n        id: \"compose_form.hashtag_warning\",\n        defaultMessage: \"This toot won't be listed under any hashtag as it is unlisted. Only public toots can be searched by hashtag.\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 30\n        }\n      }),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 12\n      }\n    });\n  }\n\n  if (directMessageWarning) {\n    var message = /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"compose_form.direct_message_warning\",\n      defaultMessage: \"This toot will only be sent to all the mentioned users.\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/terms\",\n      target: \"_blank\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 144\n      }\n    }, /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"compose_form.direct_message_warning_learn_more\",\n      defaultMessage: \"Learn more\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 177\n      }\n    })));\n    return /*#__PURE__*/React.createElement(Warning, {\n      message: message,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return null;\n};\n\nWarningWrapper.propTypes = {\n  needsLockWarning: PropTypes.bool,\n  hashtagWarning: PropTypes.bool,\n  directMessageWarning: PropTypes.bool\n};\nexport default connect(mapStateToProps)(WarningWrapper);","map":{"version":3,"sources":["/home/runner/Mastodon/live/app/javascript/mastodon/features/compose/containers/warning_container.js"],"names":["React","connect","Warning","PropTypes","FormattedMessage","me","buildHashtagRE","HASHTAG_SEPARATORS","ALPHA","WORD","RegExp","APPROX_HASHTAG_RE","mapStateToProps","state","needsLockWarning","getIn","hashtagWarning","test","directMessageWarning","WarningWrapper","locked","message","propTypes","bool"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,gBAAT,QAAiC,YAAjC;AACA,SAASC,EAAT,QAAmB,wBAAnB;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3B,MAAI;AACF,QAAMC,kBAAkB,GAAG,iBAA3B;AACA,QAAMC,KAAK,GAAG,cAAd;AACA,QAAMC,IAAI,GAAG,2BAAb;AACA,WAAO,IAAIC,MAAJ,CACL,0BACA,GADA,GACMD,IADN,GACa,IADb,GAEA,GAFA,GAEMA,IAFN,GAEaF,kBAFb,GAEkC,IAFlC,GAGA,GAHA,GAGMC,KAHN,GAGcD,kBAHd,GAGmC,GAHnC,GAIA,GAJA,GAIME,IAJN,GAIaF,kBAJb,GAIiC,IAJjC,GAKA,GALA,GAKME,IALN,GAKa,IALb,GAMA,KANA,GAOA,GAPA,GAOMA,IAPN,GAOa,KAPb,GAQA,GARA,GAQMD,KARN,GAQc,GARd,GASA,GATA,GASMC,IATN,GASa,KATb,GAUA,IAXK,EAWC,IAXD,CAAP;AAaD,GAjBD,CAiBE,gBAAM;AACN,WAAO,oCAAP;AACD;AACF,CArBD;;AAuBA,IAAME,iBAAiB,GAAGL,cAAc,EAAxC;;AAEA,IAAMM,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,KAAK;AAAA,SAAK;AAChCC,IAAAA,gBAAgB,EAAED,KAAK,CAACE,KAAN,CAAY,CAAC,SAAD,EAAY,SAAZ,CAAZ,MAAwC,SAAxC,IAAqD,CAACF,KAAK,CAACE,KAAN,CAAY,CAAC,UAAD,EAAaV,EAAb,EAAiB,QAAjB,CAAZ,CADxC;AAEhCW,IAAAA,cAAc,EAAEH,KAAK,CAACE,KAAN,CAAY,CAAC,SAAD,EAAY,SAAZ,CAAZ,MAAwC,QAAxC,IAAoDJ,iBAAiB,CAACM,IAAlB,CAAuBJ,KAAK,CAACE,KAAN,CAAY,CAAC,SAAD,EAAY,MAAZ,CAAZ,CAAvB,CAFpC;AAGhCG,IAAAA,oBAAoB,EAAEL,KAAK,CAACE,KAAN,CAAY,CAAC,SAAD,EAAY,SAAZ,CAAZ,MAAwC;AAH9B,GAAL;AAAA,CAA7B;;AAMA,IAAMI,cAAc,GAAG,SAAjBA,cAAiB,OAAgE;AAAA,MAA7DL,gBAA6D,QAA7DA,gBAA6D;AAAA,MAA3CE,cAA2C,QAA3CA,cAA2C;AAAA,MAA3BE,oBAA2B,QAA3BA,oBAA2B;;AACrF,MAAIJ,gBAAJ,EAAsB;AACpB,wBAAO,oBAAC,OAAD;AAAS,MAAA,OAAO,eAAE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,8BAArB;AAAoD,QAAA,cAAc,EAAC,uFAAnE;AAA2J,QAAA,MAAM,EAAE;AAAEM,UAAAA,MAAM,eAAE;AAAG,YAAA,IAAI,EAAC,mBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAA4B,oBAAC,gBAAD;AAAkB,YAAA,EAAE,EAAC,mCAArB;AAAyD,YAAA,cAAc,EAAC,QAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAA5B;AAAV,SAAnK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAED,MAAIJ,cAAJ,EAAoB;AAClB,wBAAO,oBAAC,OAAD;AAAS,MAAA,OAAO,eAAE,oBAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,8BAArB;AAAoD,QAAA,cAAc,EAAC,8GAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAED,MAAIE,oBAAJ,EAA0B;AACxB,QAAMG,OAAO,gBACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,gBAAD;AAAkB,MAAA,EAAE,EAAC,qCAArB;AAA2D,MAAA,cAAc,EAAC,yDAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,oBACyI;AAAG,MAAA,IAAI,EAAC,QAAR;AAAiB,MAAA,MAAM,EAAC,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAiC,oBAAC,gBAAD;AAAkB,MAAA,EAAE,EAAC,gDAArB;AAAsE,MAAA,cAAc,EAAC,YAArF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAjC,CADzI,CADF;AAMA,wBAAO,oBAAC,OAAD;AAAS,MAAA,OAAO,EAAEA,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAED,SAAO,IAAP;AACD,CApBD;;AAsBAF,cAAc,CAACG,SAAf,GAA2B;AACzBR,EAAAA,gBAAgB,EAAEX,SAAS,CAACoB,IADH;AAEzBP,EAAAA,cAAc,EAAEb,SAAS,CAACoB,IAFD;AAGzBL,EAAAA,oBAAoB,EAAEf,SAAS,CAACoB;AAHP,CAA3B;AAMA,eAAetB,OAAO,CAACW,eAAD,CAAP,CAAyBO,cAAzB,CAAf","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport Warning from '../components/warning';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\nimport { me } from '../../../initial_state';\n\nconst buildHashtagRE = () => {\n  try {\n    const HASHTAG_SEPARATORS = '_\\\\u00b7\\\\u200c';\n    const ALPHA = '\\\\p{L}\\\\p{M}';\n    const WORD = '\\\\p{L}\\\\p{M}\\\\p{N}\\\\p{Pc}';\n    return new RegExp(\n      '(?:^|[^\\\\/\\\\)\\\\w])#((' +\n      '[' + WORD + '_]' +\n      '[' + WORD + HASHTAG_SEPARATORS + ']*' +\n      '[' + ALPHA + HASHTAG_SEPARATORS + ']' +\n      '[' + WORD + HASHTAG_SEPARATORS +']*' +\n      '[' + WORD + '_]' +\n      ')|(' +\n      '[' + WORD + '_]*' +\n      '[' + ALPHA + ']' +\n      '[' + WORD + '_]*' +\n      '))', 'iu',\n    );\n  } catch {\n    return /(?:^|[^\\/\\)\\w])#(\\w*[a-zA-Z·]\\w*)/i;\n  }\n};\n\nconst APPROX_HASHTAG_RE = buildHashtagRE();\n\nconst mapStateToProps = state => ({\n  needsLockWarning: state.getIn(['compose', 'privacy']) === 'private' && !state.getIn(['accounts', me, 'locked']),\n  hashtagWarning: state.getIn(['compose', 'privacy']) !== 'public' && APPROX_HASHTAG_RE.test(state.getIn(['compose', 'text'])),\n  directMessageWarning: state.getIn(['compose', 'privacy']) === 'direct',\n});\n\nconst WarningWrapper = ({ needsLockWarning, hashtagWarning, directMessageWarning }) => {\n  if (needsLockWarning) {\n    return <Warning message={<FormattedMessage id='compose_form.lock_disclaimer' defaultMessage='Your account is not {locked}. Anyone can follow you to view your follower-only posts.' values={{ locked: <a href='/settings/profile'><FormattedMessage id='compose_form.lock_disclaimer.lock' defaultMessage='locked' /></a> }} />} />;\n  }\n\n  if (hashtagWarning) {\n    return <Warning message={<FormattedMessage id='compose_form.hashtag_warning' defaultMessage=\"This toot won't be listed under any hashtag as it is unlisted. Only public toots can be searched by hashtag.\" />} />;\n  }\n\n  if (directMessageWarning) {\n    const message = (\n      <span>\n        <FormattedMessage id='compose_form.direct_message_warning' defaultMessage='This toot will only be sent to all the mentioned users.' /> <a href='/terms' target='_blank'><FormattedMessage id='compose_form.direct_message_warning_learn_more' defaultMessage='Learn more' /></a>\n      </span>\n    );\n\n    return <Warning message={message} />;\n  }\n\n  return null;\n};\n\nWarningWrapper.propTypes = {\n  needsLockWarning: PropTypes.bool,\n  hashtagWarning: PropTypes.bool,\n  directMessageWarning: PropTypes.bool,\n};\n\nexport default connect(mapStateToProps)(WarningWrapper);\n"]},"metadata":{"react-intl":{"messages":[{"id":"compose_form.lock_disclaimer","defaultMessage":"Your account is not {locked}. Anyone can follow you to view your follower-only posts."},{"id":"compose_form.lock_disclaimer.lock","defaultMessage":"locked"},{"id":"compose_form.hashtag_warning","defaultMessage":"This toot won't be listed under any hashtag as it is unlisted. Only public toots can be searched by hashtag."},{"id":"compose_form.direct_message_warning","defaultMessage":"This toot will only be sent to all the mentioned users."},{"id":"compose_form.direct_message_warning_learn_more","defaultMessage":"Learn more"}]}},"sourceType":"module"}