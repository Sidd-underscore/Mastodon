{"ast":null,"code":"var _jsxFileName = \"/home/runner/Mastodon/live/app/javascript/mastodon/features/compose/components/search.js\",\n    _class,\n    _class2,\n    _temp;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport Overlay from 'react-overlays/lib/Overlay';\nimport Motion from '../../ui/util/optional_motion';\nimport spring from 'react-motion/lib/spring';\nimport { searchEnabled } from '../../../initial_state';\nimport Icon from 'mastodon/components/icon';\nvar messages = defineMessages({\n  placeholder: {\n    \"id\": \"search.placeholder\",\n    \"defaultMessage\": \"Search\"\n  }\n});\n\nvar SearchPopout = /*#__PURE__*/function (_React$PureComponent) {\n  _inheritsLoose(SearchPopout, _React$PureComponent);\n\n  function SearchPopout() {\n    return _React$PureComponent.apply(this, arguments) || this;\n  }\n\n  var _proto = SearchPopout.prototype;\n\n  _proto.render = function render() {\n    var _this = this;\n\n    var style = this.props.style;\n    var extraInformation = searchEnabled ? /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"search_popout.tips.full_text\",\n      defaultMessage: \"Simple text returns statuses you have written, favourited, boosted, or have been mentioned in, as well as matching usernames, display names, and hashtags.\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 46\n      }\n    }) : /*#__PURE__*/React.createElement(FormattedMessage, {\n      id: \"search_popout.tips.text\",\n      defaultMessage: \"Simple text returns matching display names, usernames and hashtags\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 275\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: _extends({}, style, {\n        position: 'absolute',\n        width: 285,\n        zIndex: 2\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Motion, {\n      defaultStyle: {\n        opacity: 0,\n        scaleX: 0.85,\n        scaleY: 0.75\n      },\n      style: {\n        opacity: spring(1, {\n          damping: 35,\n          stiffness: 400\n        }),\n        scaleX: spring(1, {\n          damping: 35,\n          stiffness: 400\n        }),\n        scaleY: spring(1, {\n          damping: 35,\n          stiffness: 400\n        })\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }\n    }, function (_ref) {\n      var opacity = _ref.opacity,\n          scaleX = _ref.scaleX,\n          scaleY = _ref.scaleY;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"search-popout\",\n        style: {\n          opacity: opacity,\n          transform: \"scale(\" + scaleX + \", \" + scaleY + \")\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(FormattedMessage, {\n        id: \"search_popout.search_format\",\n        defaultMessage: \"Advanced search format\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"ul\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"em\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 21\n        }\n      }, \"#example\"), \" \", /*#__PURE__*/React.createElement(FormattedMessage, {\n        id: \"search_popout.tips.hashtag\",\n        defaultMessage: \"hashtag\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 39\n        }\n      })), /*#__PURE__*/React.createElement(\"li\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"em\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 21\n        }\n      }, \"@username@domain\"), \" \", /*#__PURE__*/React.createElement(FormattedMessage, {\n        id: \"search_popout.tips.user\",\n        defaultMessage: \"user\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 47\n        }\n      })), /*#__PURE__*/React.createElement(\"li\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"em\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 21\n        }\n      }, \"URL\"), \" \", /*#__PURE__*/React.createElement(FormattedMessage, {\n        id: \"search_popout.tips.user\",\n        defaultMessage: \"user\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 34\n        }\n      })), /*#__PURE__*/React.createElement(\"li\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"em\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 21\n        }\n      }, \"URL\"), \" \", /*#__PURE__*/React.createElement(FormattedMessage, {\n        id: \"search_popout.tips.status\",\n        defaultMessage: \"status\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 34\n        }\n      }))), extraInformation);\n    }));\n  };\n\n  return SearchPopout;\n}(React.PureComponent);\n\nSearchPopout.propTypes = {\n  style: PropTypes.object\n};\n\nvar Search = injectIntl(_class = (_temp = _class2 = /*#__PURE__*/function (_React$PureComponent2) {\n  _inheritsLoose(Search, _React$PureComponent2);\n\n  function Search() {\n    var _this2;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this2 = _React$PureComponent2.call.apply(_React$PureComponent2, [this].concat(args)) || this;\n    _this2.state = {\n      expanded: false\n    };\n\n    _this2.setRef = function (c) {\n      _this2.searchForm = c;\n    };\n\n    _this2.handleChange = function (e) {\n      _this2.props.onChange(e.target.value);\n    };\n\n    _this2.handleClear = function (e) {\n      e.preventDefault();\n\n      if (_this2.props.value.length > 0 || _this2.props.submitted) {\n        _this2.props.onClear();\n      }\n    };\n\n    _this2.handleKeyUp = function (e) {\n      if (e.key === 'Enter') {\n        e.preventDefault();\n\n        _this2.props.onSubmit();\n\n        if (_this2.props.openInRoute) {\n          _this2.context.router.history.push('/search');\n        }\n      } else if (e.key === 'Escape') {\n        document.querySelector('.ui').parentElement.focus();\n      }\n    };\n\n    _this2.handleFocus = function () {\n      _this2.setState({\n        expanded: true\n      });\n\n      _this2.props.onShow();\n\n      if (_this2.searchForm && !_this2.props.singleColumn) {\n        var _this2$searchForm$get = _this2.searchForm.getBoundingClientRect(),\n            left = _this2$searchForm$get.left,\n            right = _this2$searchForm$get.right;\n\n        if (left < 0 || right > (window.innerWidth || document.documentElement.clientWidth)) {\n          _this2.searchForm.scrollIntoView();\n        }\n      }\n    };\n\n    _this2.handleBlur = function () {\n      _this2.setState({\n        expanded: false\n      });\n    };\n\n    return _this2;\n  }\n\n  var _proto2 = Search.prototype;\n\n  _proto2.render = function render() {\n    var _this$props = this.props,\n        intl = _this$props.intl,\n        value = _this$props.value,\n        submitted = _this$props.submitted;\n    var expanded = this.state.expanded;\n    var hasValue = value.length > 0 || submitted;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        display: 'none'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }\n    }, intl.formatMessage(messages.placeholder)), /*#__PURE__*/React.createElement(\"input\", {\n      ref: this.setRef,\n      className: \"search__input\",\n      type: \"text\",\n      placeholder: intl.formatMessage(messages.placeholder),\n      value: value,\n      onChange: this.handleChange,\n      onKeyUp: this.handleKeyUp,\n      onFocus: this.handleFocus,\n      onBlur: this.handleBlur,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      role: \"button\",\n      tabIndex: \"0\",\n      className: \"search__icon\",\n      onClick: this.handleClear,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      id: \"search\",\n      className: hasValue ? '' : 'active',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Icon, {\n      id: \"times-circle\",\n      className: hasValue ? 'active' : '',\n      \"aria-label\": intl.formatMessage(messages.placeholder),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(Overlay, {\n      show: expanded && !hasValue,\n      placement: \"bottom\",\n      target: this,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(SearchPopout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }\n    })));\n  };\n\n  return Search;\n}(React.PureComponent), _class2.contextTypes = {\n  router: PropTypes.object.isRequired\n}, _class2.propTypes = {\n  value: PropTypes.string.isRequired,\n  submitted: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  onClear: PropTypes.func.isRequired,\n  onShow: PropTypes.func.isRequired,\n  openInRoute: PropTypes.bool,\n  intl: PropTypes.object.isRequired,\n  singleColumn: PropTypes.bool\n}, _temp)) || _class;\n\nexport { Search as default };","map":{"version":3,"sources":["/home/runner/Mastodon/live/app/javascript/mastodon/features/compose/components/search.js"],"names":["React","PropTypes","defineMessages","injectIntl","FormattedMessage","Overlay","Motion","spring","searchEnabled","Icon","messages","placeholder","SearchPopout","render","style","props","extraInformation","position","width","zIndex","opacity","scaleX","scaleY","damping","stiffness","transform","PureComponent","propTypes","object","Search","state","expanded","setRef","c","searchForm","handleChange","e","onChange","target","value","handleClear","preventDefault","length","submitted","onClear","handleKeyUp","key","onSubmit","openInRoute","context","router","history","push","document","querySelector","parentElement","focus","handleFocus","setState","onShow","singleColumn","getBoundingClientRect","left","right","window","innerWidth","documentElement","clientWidth","scrollIntoView","handleBlur","intl","hasValue","display","formatMessage","contextTypes","isRequired","string","bool","func"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\nimport Overlay from 'react-overlays/lib/Overlay';\nimport Motion from '../../ui/util/optional_motion';\nimport spring from 'react-motion/lib/spring';\nimport { searchEnabled } from '../../../initial_state';\nimport Icon from 'mastodon/components/icon';\n\nconst messages = defineMessages({\n  placeholder: { id: 'search.placeholder', defaultMessage: 'Search' },\n});\n\nclass SearchPopout extends React.PureComponent {\n\n  static propTypes = {\n    style: PropTypes.object,\n  };\n\n  render () {\n    const { style } = this.props;\n    const extraInformation = searchEnabled ? <FormattedMessage id='search_popout.tips.full_text' defaultMessage='Simple text returns statuses you have written, favourited, boosted, or have been mentioned in, as well as matching usernames, display names, and hashtags.' /> : <FormattedMessage id='search_popout.tips.text' defaultMessage='Simple text returns matching display names, usernames and hashtags' />;\n    return (\n      <div style={{ ...style, position: 'absolute', width: 285, zIndex: 2 }}>\n        <Motion defaultStyle={{ opacity: 0, scaleX: 0.85, scaleY: 0.75 }} style={{ opacity: spring(1, { damping: 35, stiffness: 400 }), scaleX: spring(1, { damping: 35, stiffness: 400 }), scaleY: spring(1, { damping: 35, stiffness: 400 }) }}>\n          {({ opacity, scaleX, scaleY }) => (\n            <div className='search-popout' style={{ opacity: opacity, transform: `scale(${scaleX}, ${scaleY})` }}>\n              <h4><FormattedMessage id='search_popout.search_format' defaultMessage='Advanced search format' /></h4>\n\n              <ul>\n                <li><em>#example</em> <FormattedMessage id='search_popout.tips.hashtag' defaultMessage='hashtag' /></li>\n                <li><em>@username@domain</em> <FormattedMessage id='search_popout.tips.user' defaultMessage='user' /></li>\n                <li><em>URL</em> <FormattedMessage id='search_popout.tips.user' defaultMessage='user' /></li>\n                <li><em>URL</em> <FormattedMessage id='search_popout.tips.status' defaultMessage='status' /></li>\n              </ul>\n\n              {extraInformation}\n            </div>\n          )}\n        </Motion>\n      </div>\n    );\n  }\n\n}\n\nexport default @injectIntl\nclass Search extends React.PureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object.isRequired,\n  };\n\n  static propTypes = {\n    value: PropTypes.string.isRequired,\n    submitted: PropTypes.bool,\n    onChange: PropTypes.func.isRequired,\n    onSubmit: PropTypes.func.isRequired,\n    onClear: PropTypes.func.isRequired,\n    onShow: PropTypes.func.isRequired,\n    openInRoute: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n    singleColumn: PropTypes.bool,\n  };\n\n  state = {\n    expanded: false,\n  };\n\n  setRef = c => {\n    this.searchForm = c;\n  }\n\n  handleChange = (e) => {\n    this.props.onChange(e.target.value);\n  }\n\n  handleClear = (e) => {\n    e.preventDefault();\n\n    if (this.props.value.length > 0 || this.props.submitted) {\n      this.props.onClear();\n    }\n  }\n\n  handleKeyUp = (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n\n      this.props.onSubmit();\n\n      if (this.props.openInRoute) {\n        this.context.router.history.push('/search');\n      }\n    } else if (e.key === 'Escape') {\n      document.querySelector('.ui').parentElement.focus();\n    }\n  }\n\n  handleFocus = () => {\n    this.setState({ expanded: true });\n    this.props.onShow();\n\n    if (this.searchForm && !this.props.singleColumn) {\n      const { left, right } = this.searchForm.getBoundingClientRect();\n      if (left < 0 || right > (window.innerWidth || document.documentElement.clientWidth)) {\n        this.searchForm.scrollIntoView();\n      }\n    }\n  }\n\n  handleBlur = () => {\n    this.setState({ expanded: false });\n  }\n\n  render () {\n    const { intl, value, submitted } = this.props;\n    const { expanded } = this.state;\n    const hasValue = value.length > 0 || submitted;\n\n    return (\n      <div className='search'>\n        <label>\n          <span style={{ display: 'none' }}>{intl.formatMessage(messages.placeholder)}</span>\n          <input\n            ref={this.setRef}\n            className='search__input'\n            type='text'\n            placeholder={intl.formatMessage(messages.placeholder)}\n            value={value}\n            onChange={this.handleChange}\n            onKeyUp={this.handleKeyUp}\n            onFocus={this.handleFocus}\n            onBlur={this.handleBlur}\n          />\n        </label>\n\n        <div role='button' tabIndex='0' className='search__icon' onClick={this.handleClear}>\n          <Icon id='search' className={hasValue ? '' : 'active'} />\n          <Icon id='times-circle' className={hasValue ? 'active' : ''} aria-label={intl.formatMessage(messages.placeholder)} />\n        </div>\n\n        <Overlay show={expanded && !hasValue} placement='bottom' target={this}>\n          <SearchPopout />\n        </Overlay>\n      </div>\n    );\n  }\n\n}\n"]},"metadata":{"react-intl":{"messages":[{"id":"search.placeholder","defaultMessage":"Search"},{"id":"search_popout.tips.full_text","defaultMessage":"Simple text returns statuses you have written, favourited, boosted, or have been mentioned in, as well as matching usernames, display names, and hashtags."},{"id":"search_popout.tips.text","defaultMessage":"Simple text returns matching display names, usernames and hashtags"},{"id":"search_popout.search_format","defaultMessage":"Advanced search format"},{"id":"search_popout.tips.hashtag","defaultMessage":"hashtag"},{"id":"search_popout.tips.user","defaultMessage":"user"},{"id":"search_popout.tips.status","defaultMessage":"status"}]}},"sourceType":"module"}