{"ast":null,"code":"import api from '../api';\nimport { deleteFromTimelines } from './timelines';\nimport { importFetchedStatus, importFetchedStatuses, importFetchedAccount } from './importer';\nimport { ensureComposeIsVisible } from './compose';\nexport var STATUS_FETCH_REQUEST = 'STATUS_FETCH_REQUEST';\nexport var STATUS_FETCH_SUCCESS = 'STATUS_FETCH_SUCCESS';\nexport var STATUS_FETCH_FAIL = 'STATUS_FETCH_FAIL';\nexport var STATUS_DELETE_REQUEST = 'STATUS_DELETE_REQUEST';\nexport var STATUS_DELETE_SUCCESS = 'STATUS_DELETE_SUCCESS';\nexport var STATUS_DELETE_FAIL = 'STATUS_DELETE_FAIL';\nexport var CONTEXT_FETCH_REQUEST = 'CONTEXT_FETCH_REQUEST';\nexport var CONTEXT_FETCH_SUCCESS = 'CONTEXT_FETCH_SUCCESS';\nexport var CONTEXT_FETCH_FAIL = 'CONTEXT_FETCH_FAIL';\nexport var STATUS_MUTE_REQUEST = 'STATUS_MUTE_REQUEST';\nexport var STATUS_MUTE_SUCCESS = 'STATUS_MUTE_SUCCESS';\nexport var STATUS_MUTE_FAIL = 'STATUS_MUTE_FAIL';\nexport var STATUS_UNMUTE_REQUEST = 'STATUS_UNMUTE_REQUEST';\nexport var STATUS_UNMUTE_SUCCESS = 'STATUS_UNMUTE_SUCCESS';\nexport var STATUS_UNMUTE_FAIL = 'STATUS_UNMUTE_FAIL';\nexport var STATUS_REVEAL = 'STATUS_REVEAL';\nexport var STATUS_HIDE = 'STATUS_HIDE';\nexport var STATUS_COLLAPSE = 'STATUS_COLLAPSE';\nexport var REDRAFT = 'REDRAFT';\nexport function fetchStatusRequest(id, skipLoading) {\n  return {\n    type: STATUS_FETCH_REQUEST,\n    id,\n    skipLoading\n  };\n}\n;\nexport function fetchStatus(id) {\n  return function (dispatch, getState) {\n    var skipLoading = getState().getIn(['statuses', id], null) !== null;\n    dispatch(fetchContext(id));\n\n    if (skipLoading) {\n      return;\n    }\n\n    dispatch(fetchStatusRequest(id, skipLoading));\n    api(getState).get(\"/api/v1/statuses/\" + id).then(function (response) {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(fetchStatusSuccess(skipLoading));\n    }).catch(function (error) {\n      dispatch(fetchStatusFail(id, error, skipLoading));\n    });\n  };\n}\n;\nexport function fetchStatusSuccess(skipLoading) {\n  return {\n    type: STATUS_FETCH_SUCCESS,\n    skipLoading\n  };\n}\n;\nexport function fetchStatusFail(id, error, skipLoading) {\n  return {\n    type: STATUS_FETCH_FAIL,\n    id,\n    error,\n    skipLoading,\n    skipAlert: true\n  };\n}\n;\nexport function redraft(status, raw_text) {\n  return {\n    type: REDRAFT,\n    status,\n    raw_text\n  };\n}\n;\nexport function deleteStatus(id, routerHistory, withRedraft) {\n  if (withRedraft === void 0) {\n    withRedraft = false;\n  }\n\n  return function (dispatch, getState) {\n    var status = getState().getIn(['statuses', id]);\n\n    if (status.get('poll')) {\n      status = status.set('poll', getState().getIn(['polls', status.get('poll')]));\n    }\n\n    dispatch(deleteStatusRequest(id));\n    api(getState).delete(\"/api/v1/statuses/\" + id).then(function (response) {\n      dispatch(deleteStatusSuccess(id));\n      dispatch(deleteFromTimelines(id));\n      dispatch(importFetchedAccount(response.data.account));\n\n      if (withRedraft) {\n        dispatch(redraft(status, response.data.text));\n        ensureComposeIsVisible(getState, routerHistory);\n      }\n    }).catch(function (error) {\n      dispatch(deleteStatusFail(id, error));\n    });\n  };\n}\n;\nexport function deleteStatusRequest(id) {\n  return {\n    type: STATUS_DELETE_REQUEST,\n    id: id\n  };\n}\n;\nexport function deleteStatusSuccess(id) {\n  return {\n    type: STATUS_DELETE_SUCCESS,\n    id: id\n  };\n}\n;\nexport function deleteStatusFail(id, error) {\n  return {\n    type: STATUS_DELETE_FAIL,\n    id: id,\n    error: error\n  };\n}\n;\nexport function fetchContext(id) {\n  return function (dispatch, getState) {\n    dispatch(fetchContextRequest(id));\n    api(getState).get(\"/api/v1/statuses/\" + id + \"/context\").then(function (response) {\n      dispatch(importFetchedStatuses(response.data.ancestors.concat(response.data.descendants)));\n      dispatch(fetchContextSuccess(id, response.data.ancestors, response.data.descendants));\n    }).catch(function (error) {\n      if (error.response && error.response.status === 404) {\n        dispatch(deleteFromTimelines(id));\n      }\n\n      dispatch(fetchContextFail(id, error));\n    });\n  };\n}\n;\nexport function fetchContextRequest(id) {\n  return {\n    type: CONTEXT_FETCH_REQUEST,\n    id\n  };\n}\n;\nexport function fetchContextSuccess(id, ancestors, descendants) {\n  return {\n    type: CONTEXT_FETCH_SUCCESS,\n    id,\n    ancestors,\n    descendants,\n    statuses: ancestors.concat(descendants)\n  };\n}\n;\nexport function fetchContextFail(id, error) {\n  return {\n    type: CONTEXT_FETCH_FAIL,\n    id,\n    error,\n    skipAlert: true\n  };\n}\n;\nexport function muteStatus(id) {\n  return function (dispatch, getState) {\n    dispatch(muteStatusRequest(id));\n    api(getState).post(\"/api/v1/statuses/\" + id + \"/mute\").then(function () {\n      dispatch(muteStatusSuccess(id));\n    }).catch(function (error) {\n      dispatch(muteStatusFail(id, error));\n    });\n  };\n}\n;\nexport function muteStatusRequest(id) {\n  return {\n    type: STATUS_MUTE_REQUEST,\n    id\n  };\n}\n;\nexport function muteStatusSuccess(id) {\n  return {\n    type: STATUS_MUTE_SUCCESS,\n    id\n  };\n}\n;\nexport function muteStatusFail(id, error) {\n  return {\n    type: STATUS_MUTE_FAIL,\n    id,\n    error\n  };\n}\n;\nexport function unmuteStatus(id) {\n  return function (dispatch, getState) {\n    dispatch(unmuteStatusRequest(id));\n    api(getState).post(\"/api/v1/statuses/\" + id + \"/unmute\").then(function () {\n      dispatch(unmuteStatusSuccess(id));\n    }).catch(function (error) {\n      dispatch(unmuteStatusFail(id, error));\n    });\n  };\n}\n;\nexport function unmuteStatusRequest(id) {\n  return {\n    type: STATUS_UNMUTE_REQUEST,\n    id\n  };\n}\n;\nexport function unmuteStatusSuccess(id) {\n  return {\n    type: STATUS_UNMUTE_SUCCESS,\n    id\n  };\n}\n;\nexport function unmuteStatusFail(id, error) {\n  return {\n    type: STATUS_UNMUTE_FAIL,\n    id,\n    error\n  };\n}\n;\nexport function hideStatus(ids) {\n  if (!Array.isArray(ids)) {\n    ids = [ids];\n  }\n\n  return {\n    type: STATUS_HIDE,\n    ids\n  };\n}\n;\nexport function revealStatus(ids) {\n  if (!Array.isArray(ids)) {\n    ids = [ids];\n  }\n\n  return {\n    type: STATUS_REVEAL,\n    ids\n  };\n}\n;\nexport function toggleStatusCollapse(id, isCollapsed) {\n  return {\n    type: STATUS_COLLAPSE,\n    id,\n    isCollapsed\n  };\n}","map":{"version":3,"sources":["/home/runner/Mastodon/live/app/javascript/mastodon/actions/statuses.js"],"names":["api","deleteFromTimelines","importFetchedStatus","importFetchedStatuses","importFetchedAccount","ensureComposeIsVisible","STATUS_FETCH_REQUEST","STATUS_FETCH_SUCCESS","STATUS_FETCH_FAIL","STATUS_DELETE_REQUEST","STATUS_DELETE_SUCCESS","STATUS_DELETE_FAIL","CONTEXT_FETCH_REQUEST","CONTEXT_FETCH_SUCCESS","CONTEXT_FETCH_FAIL","STATUS_MUTE_REQUEST","STATUS_MUTE_SUCCESS","STATUS_MUTE_FAIL","STATUS_UNMUTE_REQUEST","STATUS_UNMUTE_SUCCESS","STATUS_UNMUTE_FAIL","STATUS_REVEAL","STATUS_HIDE","STATUS_COLLAPSE","REDRAFT","fetchStatusRequest","id","skipLoading","type","fetchStatus","dispatch","getState","getIn","fetchContext","get","then","response","data","fetchStatusSuccess","catch","error","fetchStatusFail","skipAlert","redraft","status","raw_text","deleteStatus","routerHistory","withRedraft","set","deleteStatusRequest","delete","deleteStatusSuccess","account","text","deleteStatusFail","fetchContextRequest","ancestors","concat","descendants","fetchContextSuccess","fetchContextFail","statuses","muteStatus","muteStatusRequest","post","muteStatusSuccess","muteStatusFail","unmuteStatus","unmuteStatusRequest","unmuteStatusSuccess","unmuteStatusFail","hideStatus","ids","Array","isArray","revealStatus","toggleStatusCollapse","isCollapsed"],"mappings":"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","sourcesContent":["import api from '../api';\n\nimport { deleteFromTimelines } from './timelines';\nimport { importFetchedStatus, importFetchedStatuses, importFetchedAccount } from './importer';\nimport { ensureComposeIsVisible } from './compose';\n\nexport const STATUS_FETCH_REQUEST = 'STATUS_FETCH_REQUEST';\nexport const STATUS_FETCH_SUCCESS = 'STATUS_FETCH_SUCCESS';\nexport const STATUS_FETCH_FAIL    = 'STATUS_FETCH_FAIL';\n\nexport const STATUS_DELETE_REQUEST = 'STATUS_DELETE_REQUEST';\nexport const STATUS_DELETE_SUCCESS = 'STATUS_DELETE_SUCCESS';\nexport const STATUS_DELETE_FAIL    = 'STATUS_DELETE_FAIL';\n\nexport const CONTEXT_FETCH_REQUEST = 'CONTEXT_FETCH_REQUEST';\nexport const CONTEXT_FETCH_SUCCESS = 'CONTEXT_FETCH_SUCCESS';\nexport const CONTEXT_FETCH_FAIL    = 'CONTEXT_FETCH_FAIL';\n\nexport const STATUS_MUTE_REQUEST = 'STATUS_MUTE_REQUEST';\nexport const STATUS_MUTE_SUCCESS = 'STATUS_MUTE_SUCCESS';\nexport const STATUS_MUTE_FAIL    = 'STATUS_MUTE_FAIL';\n\nexport const STATUS_UNMUTE_REQUEST = 'STATUS_UNMUTE_REQUEST';\nexport const STATUS_UNMUTE_SUCCESS = 'STATUS_UNMUTE_SUCCESS';\nexport const STATUS_UNMUTE_FAIL    = 'STATUS_UNMUTE_FAIL';\n\nexport const STATUS_REVEAL   = 'STATUS_REVEAL';\nexport const STATUS_HIDE     = 'STATUS_HIDE';\nexport const STATUS_COLLAPSE = 'STATUS_COLLAPSE';\n\nexport const REDRAFT = 'REDRAFT';\n\nexport function fetchStatusRequest(id, skipLoading) {\n  return {\n    type: STATUS_FETCH_REQUEST,\n    id,\n    skipLoading,\n  };\n};\n\nexport function fetchStatus(id) {\n  return (dispatch, getState) => {\n    const skipLoading = getState().getIn(['statuses', id], null) !== null;\n\n    dispatch(fetchContext(id));\n\n    if (skipLoading) {\n      return;\n    }\n\n    dispatch(fetchStatusRequest(id, skipLoading));\n\n    api(getState).get(`/api/v1/statuses/${id}`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(fetchStatusSuccess(skipLoading));\n    }).catch(error => {\n      dispatch(fetchStatusFail(id, error, skipLoading));\n    });\n  };\n};\n\nexport function fetchStatusSuccess(skipLoading) {\n  return {\n    type: STATUS_FETCH_SUCCESS,\n    skipLoading,\n  };\n};\n\nexport function fetchStatusFail(id, error, skipLoading) {\n  return {\n    type: STATUS_FETCH_FAIL,\n    id,\n    error,\n    skipLoading,\n    skipAlert: true,\n  };\n};\n\nexport function redraft(status, raw_text) {\n  return {\n    type: REDRAFT,\n    status,\n    raw_text,\n  };\n};\n\nexport function deleteStatus(id, routerHistory, withRedraft = false) {\n  return (dispatch, getState) => {\n    let status = getState().getIn(['statuses', id]);\n\n    if (status.get('poll')) {\n      status = status.set('poll', getState().getIn(['polls', status.get('poll')]));\n    }\n\n    dispatch(deleteStatusRequest(id));\n\n    api(getState).delete(`/api/v1/statuses/${id}`).then(response => {\n      dispatch(deleteStatusSuccess(id));\n      dispatch(deleteFromTimelines(id));\n      dispatch(importFetchedAccount(response.data.account));\n\n      if (withRedraft) {\n        dispatch(redraft(status, response.data.text));\n        ensureComposeIsVisible(getState, routerHistory);\n      }\n    }).catch(error => {\n      dispatch(deleteStatusFail(id, error));\n    });\n  };\n};\n\nexport function deleteStatusRequest(id) {\n  return {\n    type: STATUS_DELETE_REQUEST,\n    id: id,\n  };\n};\n\nexport function deleteStatusSuccess(id) {\n  return {\n    type: STATUS_DELETE_SUCCESS,\n    id: id,\n  };\n};\n\nexport function deleteStatusFail(id, error) {\n  return {\n    type: STATUS_DELETE_FAIL,\n    id: id,\n    error: error,\n  };\n};\n\nexport function fetchContext(id) {\n  return (dispatch, getState) => {\n    dispatch(fetchContextRequest(id));\n\n    api(getState).get(`/api/v1/statuses/${id}/context`).then(response => {\n      dispatch(importFetchedStatuses(response.data.ancestors.concat(response.data.descendants)));\n      dispatch(fetchContextSuccess(id, response.data.ancestors, response.data.descendants));\n\n    }).catch(error => {\n      if (error.response && error.response.status === 404) {\n        dispatch(deleteFromTimelines(id));\n      }\n\n      dispatch(fetchContextFail(id, error));\n    });\n  };\n};\n\nexport function fetchContextRequest(id) {\n  return {\n    type: CONTEXT_FETCH_REQUEST,\n    id,\n  };\n};\n\nexport function fetchContextSuccess(id, ancestors, descendants) {\n  return {\n    type: CONTEXT_FETCH_SUCCESS,\n    id,\n    ancestors,\n    descendants,\n    statuses: ancestors.concat(descendants),\n  };\n};\n\nexport function fetchContextFail(id, error) {\n  return {\n    type: CONTEXT_FETCH_FAIL,\n    id,\n    error,\n    skipAlert: true,\n  };\n};\n\nexport function muteStatus(id) {\n  return (dispatch, getState) => {\n    dispatch(muteStatusRequest(id));\n\n    api(getState).post(`/api/v1/statuses/${id}/mute`).then(() => {\n      dispatch(muteStatusSuccess(id));\n    }).catch(error => {\n      dispatch(muteStatusFail(id, error));\n    });\n  };\n};\n\nexport function muteStatusRequest(id) {\n  return {\n    type: STATUS_MUTE_REQUEST,\n    id,\n  };\n};\n\nexport function muteStatusSuccess(id) {\n  return {\n    type: STATUS_MUTE_SUCCESS,\n    id,\n  };\n};\n\nexport function muteStatusFail(id, error) {\n  return {\n    type: STATUS_MUTE_FAIL,\n    id,\n    error,\n  };\n};\n\nexport function unmuteStatus(id) {\n  return (dispatch, getState) => {\n    dispatch(unmuteStatusRequest(id));\n\n    api(getState).post(`/api/v1/statuses/${id}/unmute`).then(() => {\n      dispatch(unmuteStatusSuccess(id));\n    }).catch(error => {\n      dispatch(unmuteStatusFail(id, error));\n    });\n  };\n};\n\nexport function unmuteStatusRequest(id) {\n  return {\n    type: STATUS_UNMUTE_REQUEST,\n    id,\n  };\n};\n\nexport function unmuteStatusSuccess(id) {\n  return {\n    type: STATUS_UNMUTE_SUCCESS,\n    id,\n  };\n};\n\nexport function unmuteStatusFail(id, error) {\n  return {\n    type: STATUS_UNMUTE_FAIL,\n    id,\n    error,\n  };\n};\n\nexport function hideStatus(ids) {\n  if (!Array.isArray(ids)) {\n    ids = [ids];\n  }\n\n  return {\n    type: STATUS_HIDE,\n    ids,\n  };\n};\n\nexport function revealStatus(ids) {\n  if (!Array.isArray(ids)) {\n    ids = [ids];\n  }\n\n  return {\n    type: STATUS_REVEAL,\n    ids,\n  };\n};\n\nexport function toggleStatusCollapse(id, isCollapsed) {\n  return {\n    type: STATUS_COLLAPSE,\n    id,\n    isCollapsed,\n  };\n}\n"]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}