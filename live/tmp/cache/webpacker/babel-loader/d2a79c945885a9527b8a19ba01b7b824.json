{"ast":null,"code":"var _jsxFileName = \"/home/runner/Mastodon/live/app/javascript/mastodon/features/ui/index.js\",\n    _dec,\n    _class,\n    _class2,\n    _temp;\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport classNames from 'classnames';\nimport React from 'react';\nimport { HotKeys } from 'react-hotkeys';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport NotificationsContainer from './containers/notifications_container';\nimport LoadingBarContainer from './containers/loading_bar_container';\nimport ModalContainer from './containers/modal_container';\nimport { layoutFromWindow } from 'mastodon/is_mobile';\nimport { debounce } from 'lodash';\nimport { uploadCompose, resetCompose, changeComposeSpoilerness } from '../../actions/compose';\nimport { expandHomeTimeline } from '../../actions/timelines';\nimport { expandNotifications } from '../../actions/notifications';\nimport { fetchFilters } from '../../actions/filters';\nimport { clearHeight } from '../../actions/height_cache';\nimport { focusApp, unfocusApp, changeLayout } from 'mastodon/actions/app';\nimport { synchronouslySubmitMarkers, submitMarkers, fetchMarkers } from 'mastodon/actions/markers';\nimport { WrappedSwitch, WrappedRoute } from './util/react_router_helpers';\nimport UploadArea from './components/upload_area';\nimport ColumnsAreaContainer from './containers/columns_area_container';\nimport DocumentTitle from './components/document_title';\nimport PictureInPicture from 'mastodon/features/picture_in_picture';\nimport { Compose, Status, GettingStarted, KeyboardShortcuts, PublicTimeline, CommunityTimeline, AccountTimeline, AccountGallery, HomeTimeline, Followers, Following, Reblogs, Favourites, DirectTimeline, HashtagTimeline, Notifications, FollowRequests, GenericNotFound, FavouritedStatuses, BookmarkedStatuses, ListTimeline, Blocks, DomainBlocks, Mutes, PinnedStatuses, Lists, Search, Directory, FollowRecommendations } from './util/async-components';\nimport { me } from '../../initial_state';\nimport { closeOnboarding, INTRODUCTION_VERSION } from 'mastodon/actions/onboarding'; // Dummy import, to make sure that <Status /> ends up in the application bundle.\n// Without this it ends up in ~8 very commonly used bundles.\n\nimport '../../components/status';\nvar messages = defineMessages({\n  beforeUnload: {\n    \"id\": \"ui.beforeunload\",\n    \"defaultMessage\": \"Your draft will be lost if you leave Mastodon.\"\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    layout: state.getIn(['meta', 'layout']),\n    isComposing: state.getIn(['compose', 'is_composing']),\n    hasComposingText: state.getIn(['compose', 'text']).trim().length !== 0,\n    hasMediaAttachments: state.getIn(['compose', 'media_attachments']).size > 0,\n    canUploadMore: !state.getIn(['compose', 'media_attachments']).some(function (x) {\n      return ['audio', 'video'].includes(x.get('type'));\n    }) && state.getIn(['compose', 'media_attachments']).size < 4,\n    dropdownMenuIsOpen: state.getIn(['dropdown_menu', 'openId']) !== null,\n    firstLaunch: state.getIn(['settings', 'introductionVersion'], 0) < INTRODUCTION_VERSION\n  };\n};\n\nvar keyMap = {\n  help: '?',\n  new: 'n',\n  search: 's',\n  forceNew: 'option+n',\n  toggleComposeSpoilers: 'option+x',\n  focusColumn: ['1', '2', '3', '4', '5', '6', '7', '8', '9'],\n  reply: 'r',\n  favourite: 'f',\n  boost: 'b',\n  mention: 'm',\n  open: ['enter', 'o'],\n  openProfile: 'p',\n  moveDown: ['down', 'j'],\n  moveUp: ['up', 'k'],\n  back: 'backspace',\n  goToHome: 'g h',\n  goToNotifications: 'g n',\n  goToLocal: 'g l',\n  goToFederated: 'g t',\n  goToDirect: 'g d',\n  goToStart: 'g s',\n  goToFavourites: 'g f',\n  goToPinned: 'g p',\n  goToProfile: 'g u',\n  goToBlocked: 'g b',\n  goToMuted: 'g m',\n  goToRequests: 'g r',\n  toggleHidden: 'x',\n  toggleSensitive: 'h',\n  openMedia: 'e'\n};\n\nvar SwitchingColumnsArea = /*#__PURE__*/function (_React$PureComponent) {\n  _inheritsLoose(SwitchingColumnsArea, _React$PureComponent);\n\n  function SwitchingColumnsArea() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$PureComponent.call.apply(_React$PureComponent, [this].concat(args)) || this;\n\n    _this.setRef = function (c) {\n      if (c) {\n        _this.node = c.getWrappedInstance();\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = SwitchingColumnsArea.prototype;\n\n  _proto.componentWillMount = function componentWillMount() {\n    if (this.props.mobile) {\n      document.body.classList.toggle('layout-single-column', true);\n      document.body.classList.toggle('layout-multiple-columns', false);\n    } else {\n      document.body.classList.toggle('layout-single-column', false);\n      document.body.classList.toggle('layout-multiple-columns', true);\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (![this.props.location.pathname, '/'].includes(prevProps.location.pathname)) {\n      this.node.handleChildrenContentChange();\n    }\n\n    if (prevProps.mobile !== this.props.mobile) {\n      document.body.classList.toggle('layout-single-column', this.props.mobile);\n      document.body.classList.toggle('layout-multiple-columns', !this.props.mobile);\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        children = _this$props.children,\n        mobile = _this$props.mobile;\n    var redirect = mobile ? /*#__PURE__*/React.createElement(Redirect, {\n      from: \"/\",\n      to: \"/timelines/home\",\n      exact: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 31\n      }\n    }) : /*#__PURE__*/React.createElement(Redirect, {\n      from: \"/\",\n      to: \"/getting-started\",\n      exact: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 82\n      }\n    });\n    return /*#__PURE__*/React.createElement(ColumnsAreaContainer, {\n      ref: this.setRef,\n      singleColumn: mobile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(WrappedSwitch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }\n    }, redirect, /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/getting-started\",\n      component: GettingStarted,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/keyboard-shortcuts\",\n      component: KeyboardShortcuts,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/timelines/home\",\n      component: HomeTimeline,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/timelines/public\",\n      exact: true,\n      component: PublicTimeline,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/timelines/public/local\",\n      exact: true,\n      component: CommunityTimeline,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/timelines/direct\",\n      component: DirectTimeline,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/timelines/tag/:id\",\n      component: HashtagTimeline,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/timelines/list/:id\",\n      component: ListTimeline,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/notifications\",\n      component: Notifications,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/favourites\",\n      component: FavouritedStatuses,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/bookmarks\",\n      component: BookmarkedStatuses,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/pinned\",\n      component: PinnedStatuses,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/start\",\n      component: FollowRecommendations,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/search\",\n      component: Search,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/directory\",\n      component: Directory,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/statuses/new\",\n      component: Compose,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/statuses/:statusId\",\n      exact: true,\n      component: Status,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/statuses/:statusId/reblogs\",\n      component: Reblogs,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/statuses/:statusId/favourites\",\n      component: Favourites,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/accounts/:accountId\",\n      exact: true,\n      component: AccountTimeline,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/accounts/:accountId/with_replies\",\n      component: AccountTimeline,\n      content: children,\n      componentParams: {\n        withReplies: true\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/accounts/:accountId/followers\",\n      component: Followers,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/accounts/:accountId/following\",\n      component: Following,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/accounts/:accountId/media\",\n      component: AccountGallery,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/follow_requests\",\n      component: FollowRequests,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/blocks\",\n      component: Blocks,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/domain_blocks\",\n      component: DomainBlocks,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/mutes\",\n      component: Mutes,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      path: \"/lists\",\n      component: Lists,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(WrappedRoute, {\n      component: GenericNotFound,\n      content: children,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }\n    })));\n  };\n\n  return SwitchingColumnsArea;\n}(React.PureComponent);\n\nSwitchingColumnsArea.propTypes = {\n  children: PropTypes.node,\n  location: PropTypes.object,\n  mobile: PropTypes.bool\n};\nvar UI = (_dec = connect(mapStateToProps), _dec(_class = injectIntl(_class = withRouter(_class = (_temp = _class2 = /*#__PURE__*/function (_React$PureComponent2) {\n  _inheritsLoose(UI, _React$PureComponent2);\n\n  function UI() {\n    var _this2;\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    _this2 = _React$PureComponent2.call.apply(_React$PureComponent2, [this].concat(args)) || this;\n    _this2.state = {\n      draggingOver: false\n    };\n\n    _this2.handleBeforeUnload = function (e) {\n      var _this2$props = _this2.props,\n          intl = _this2$props.intl,\n          dispatch = _this2$props.dispatch,\n          isComposing = _this2$props.isComposing,\n          hasComposingText = _this2$props.hasComposingText,\n          hasMediaAttachments = _this2$props.hasMediaAttachments;\n      dispatch(synchronouslySubmitMarkers());\n\n      if (isComposing && (hasComposingText || hasMediaAttachments)) {\n        e.preventDefault(); // Setting returnValue to any string causes confirmation dialog.\n        // Many browsers no longer display this text to users,\n        // but we set user-friendly message for other browsers, e.g. Edge.\n\n        e.returnValue = intl.formatMessage(messages.beforeUnload);\n      }\n    };\n\n    _this2.handleWindowFocus = function () {\n      _this2.props.dispatch(focusApp());\n\n      _this2.props.dispatch(submitMarkers({\n        immediate: true\n      }));\n    };\n\n    _this2.handleWindowBlur = function () {\n      _this2.props.dispatch(unfocusApp());\n    };\n\n    _this2.handleDragEnter = function (e) {\n      e.preventDefault();\n\n      if (!_this2.dragTargets) {\n        _this2.dragTargets = [];\n      }\n\n      if (_this2.dragTargets.indexOf(e.target) === -1) {\n        _this2.dragTargets.push(e.target);\n      }\n\n      if (e.dataTransfer && Array.from(e.dataTransfer.types).includes('Files') && _this2.props.canUploadMore) {\n        _this2.setState({\n          draggingOver: true\n        });\n      }\n    };\n\n    _this2.handleDragOver = function (e) {\n      if (_this2.dataTransferIsText(e.dataTransfer)) return false;\n      e.preventDefault();\n      e.stopPropagation();\n\n      try {\n        e.dataTransfer.dropEffect = 'copy';\n      } catch (err) {}\n\n      return false;\n    };\n\n    _this2.handleDrop = function (e) {\n      if (_this2.dataTransferIsText(e.dataTransfer)) return;\n      e.preventDefault();\n\n      _this2.setState({\n        draggingOver: false\n      });\n\n      _this2.dragTargets = [];\n\n      if (e.dataTransfer && e.dataTransfer.files.length >= 1 && _this2.props.canUploadMore) {\n        _this2.props.dispatch(uploadCompose(e.dataTransfer.files));\n      }\n    };\n\n    _this2.handleDragLeave = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      _this2.dragTargets = _this2.dragTargets.filter(function (el) {\n        return el !== e.target && _this2.node.contains(el);\n      });\n\n      if (_this2.dragTargets.length > 0) {\n        return;\n      }\n\n      _this2.setState({\n        draggingOver: false\n      });\n    };\n\n    _this2.dataTransferIsText = function (dataTransfer) {\n      return dataTransfer && Array.from(dataTransfer.types).filter(function (type) {\n        return type === 'text/plain';\n      }).length === 1;\n    };\n\n    _this2.closeUploadModal = function () {\n      _this2.setState({\n        draggingOver: false\n      });\n    };\n\n    _this2.handleServiceWorkerPostMessage = function (_ref) {\n      var data = _ref.data;\n\n      if (data.type === 'navigate') {\n        _this2.context.router.history.push(data.path);\n      } else {\n        console.warn('Unknown message type:', data.type);\n      }\n    };\n\n    _this2.handleLayoutChange = debounce(function () {\n      _this2.props.dispatch(clearHeight()); // The cached heights are no longer accurate, invalidate\n\n    }, 500, {\n      trailing: true\n    });\n\n    _this2.handleResize = function () {\n      var layout = layoutFromWindow();\n\n      if (layout !== _this2.props.layout) {\n        _this2.handleLayoutChange.cancel();\n\n        _this2.props.dispatch(changeLayout(layout));\n      } else {\n        _this2.handleLayoutChange();\n      }\n    };\n\n    _this2.setRef = function (c) {\n      _this2.node = c;\n    };\n\n    _this2.handleHotkeyNew = function (e) {\n      e.preventDefault();\n\n      var element = _this2.node.querySelector('.compose-form__autosuggest-wrapper textarea');\n\n      if (element) {\n        element.focus();\n      }\n    };\n\n    _this2.handleHotkeySearch = function (e) {\n      e.preventDefault();\n\n      var element = _this2.node.querySelector('.search__input');\n\n      if (element) {\n        element.focus();\n      }\n    };\n\n    _this2.handleHotkeyForceNew = function (e) {\n      _this2.handleHotkeyNew(e);\n\n      _this2.props.dispatch(resetCompose());\n    };\n\n    _this2.handleHotkeyToggleComposeSpoilers = function (e) {\n      e.preventDefault();\n\n      _this2.props.dispatch(changeComposeSpoilerness());\n    };\n\n    _this2.handleHotkeyFocusColumn = function (e) {\n      var index = e.key * 1 + 1; // First child is drawer, skip that\n\n      var column = _this2.node.querySelector(\".column:nth-child(\" + index + \")\");\n\n      if (!column) return;\n      var container = column.querySelector('.scrollable');\n\n      if (container) {\n        var status = container.querySelector('.focusable');\n\n        if (status) {\n          if (container.scrollTop > status.offsetTop) {\n            status.scrollIntoView(true);\n          }\n\n          status.focus();\n        }\n      }\n    };\n\n    _this2.handleHotkeyBack = function () {\n      if (window.history && window.history.length === 1) {\n        _this2.context.router.history.push('/');\n      } else {\n        _this2.context.router.history.goBack();\n      }\n    };\n\n    _this2.setHotkeysRef = function (c) {\n      _this2.hotkeys = c;\n    };\n\n    _this2.handleHotkeyToggleHelp = function () {\n      if (_this2.props.location.pathname === '/keyboard-shortcuts') {\n        _this2.context.router.history.goBack();\n      } else {\n        _this2.context.router.history.push('/keyboard-shortcuts');\n      }\n    };\n\n    _this2.handleHotkeyGoToHome = function () {\n      _this2.context.router.history.push('/timelines/home');\n    };\n\n    _this2.handleHotkeyGoToNotifications = function () {\n      _this2.context.router.history.push('/notifications');\n    };\n\n    _this2.handleHotkeyGoToLocal = function () {\n      _this2.context.router.history.push('/timelines/public/local');\n    };\n\n    _this2.handleHotkeyGoToFederated = function () {\n      _this2.context.router.history.push('/timelines/public');\n    };\n\n    _this2.handleHotkeyGoToDirect = function () {\n      _this2.context.router.history.push('/timelines/direct');\n    };\n\n    _this2.handleHotkeyGoToStart = function () {\n      _this2.context.router.history.push('/getting-started');\n    };\n\n    _this2.handleHotkeyGoToFavourites = function () {\n      _this2.context.router.history.push('/favourites');\n    };\n\n    _this2.handleHotkeyGoToPinned = function () {\n      _this2.context.router.history.push('/pinned');\n    };\n\n    _this2.handleHotkeyGoToProfile = function () {\n      _this2.context.router.history.push(\"/accounts/\" + me);\n    };\n\n    _this2.handleHotkeyGoToBlocked = function () {\n      _this2.context.router.history.push('/blocks');\n    };\n\n    _this2.handleHotkeyGoToMuted = function () {\n      _this2.context.router.history.push('/mutes');\n    };\n\n    _this2.handleHotkeyGoToRequests = function () {\n      _this2.context.router.history.push('/follow_requests');\n    };\n\n    return _this2;\n  }\n\n  var _proto2 = UI.prototype;\n\n  _proto2.componentDidMount = function componentDidMount() {\n    var _this3 = this;\n\n    window.addEventListener('focus', this.handleWindowFocus, false);\n    window.addEventListener('blur', this.handleWindowBlur, false);\n    window.addEventListener('beforeunload', this.handleBeforeUnload, false);\n    window.addEventListener('resize', this.handleResize, {\n      passive: true\n    });\n    document.addEventListener('dragenter', this.handleDragEnter, false);\n    document.addEventListener('dragover', this.handleDragOver, false);\n    document.addEventListener('drop', this.handleDrop, false);\n    document.addEventListener('dragleave', this.handleDragLeave, false);\n    document.addEventListener('dragend', this.handleDragEnd, false);\n\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.addEventListener('message', this.handleServiceWorkerPostMessage);\n    } // On first launch, redirect to the follow recommendations page\n\n\n    if (this.props.firstLaunch) {\n      this.context.router.history.replace('/start');\n      this.props.dispatch(closeOnboarding());\n    }\n\n    this.props.dispatch(fetchMarkers());\n    this.props.dispatch(expandHomeTimeline());\n    this.props.dispatch(expandNotifications());\n    setTimeout(function () {\n      return _this3.props.dispatch(fetchFilters());\n    }, 500);\n\n    this.hotkeys.__mousetrap__.stopCallback = function (e, element) {\n      return ['TEXTAREA', 'SELECT', 'INPUT'].includes(element.tagName);\n    };\n  };\n\n  _proto2.componentWillUnmount = function componentWillUnmount() {\n    window.removeEventListener('focus', this.handleWindowFocus);\n    window.removeEventListener('blur', this.handleWindowBlur);\n    window.removeEventListener('beforeunload', this.handleBeforeUnload);\n    window.removeEventListener('resize', this.handleResize);\n    document.removeEventListener('dragenter', this.handleDragEnter);\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragleave', this.handleDragLeave);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  };\n\n  _proto2.render = function render() {\n    var draggingOver = this.state.draggingOver;\n    var _this$props2 = this.props,\n        children = _this$props2.children,\n        isComposing = _this$props2.isComposing,\n        location = _this$props2.location,\n        dropdownMenuIsOpen = _this$props2.dropdownMenuIsOpen,\n        layout = _this$props2.layout;\n    var handlers = {\n      help: this.handleHotkeyToggleHelp,\n      new: this.handleHotkeyNew,\n      search: this.handleHotkeySearch,\n      forceNew: this.handleHotkeyForceNew,\n      toggleComposeSpoilers: this.handleHotkeyToggleComposeSpoilers,\n      focusColumn: this.handleHotkeyFocusColumn,\n      back: this.handleHotkeyBack,\n      goToHome: this.handleHotkeyGoToHome,\n      goToNotifications: this.handleHotkeyGoToNotifications,\n      goToLocal: this.handleHotkeyGoToLocal,\n      goToFederated: this.handleHotkeyGoToFederated,\n      goToDirect: this.handleHotkeyGoToDirect,\n      goToStart: this.handleHotkeyGoToStart,\n      goToFavourites: this.handleHotkeyGoToFavourites,\n      goToPinned: this.handleHotkeyGoToPinned,\n      goToProfile: this.handleHotkeyGoToProfile,\n      goToBlocked: this.handleHotkeyGoToBlocked,\n      goToMuted: this.handleHotkeyGoToMuted,\n      goToRequests: this.handleHotkeyGoToRequests\n    };\n    return /*#__PURE__*/React.createElement(HotKeys, {\n      keyMap: keyMap,\n      handlers: handlers,\n      ref: this.setHotkeysRef,\n      attach: window,\n      focused: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames('ui', {\n        'is-composing': isComposing\n      }),\n      ref: this.setRef,\n      style: {\n        pointerEvents: dropdownMenuIsOpen ? 'none' : null\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(SwitchingColumnsArea, {\n      location: location,\n      mobile: layout === 'mobile' || layout === 'single-column',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 11\n      }\n    }, children), layout !== 'mobile' && /*#__PURE__*/React.createElement(PictureInPicture, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 35\n      }\n    }), /*#__PURE__*/React.createElement(NotificationsContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(LoadingBarContainer, {\n      className: \"loading-bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(ModalContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(UploadArea, {\n      active: draggingOver,\n      onClose: this.closeUploadModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(DocumentTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 11\n      }\n    })));\n  };\n\n  return UI;\n}(React.PureComponent), _class2.contextTypes = {\n  router: PropTypes.object.isRequired\n}, _class2.propTypes = {\n  dispatch: PropTypes.func.isRequired,\n  children: PropTypes.node,\n  isComposing: PropTypes.bool,\n  hasComposingText: PropTypes.bool,\n  hasMediaAttachments: PropTypes.bool,\n  canUploadMore: PropTypes.bool,\n  location: PropTypes.object,\n  intl: PropTypes.object.isRequired,\n  dropdownMenuIsOpen: PropTypes.bool,\n  layout: PropTypes.string.isRequired,\n  firstLaunch: PropTypes.bool\n}, _temp)) || _class) || _class) || _class);\nexport { UI as default };","map":{"version":3,"sources":["/home/runner/Mastodon/live/app/javascript/mastodon/features/ui/index.js"],"names":["classNames","React","HotKeys","defineMessages","injectIntl","connect","Redirect","withRouter","PropTypes","NotificationsContainer","LoadingBarContainer","ModalContainer","layoutFromWindow","debounce","uploadCompose","resetCompose","changeComposeSpoilerness","expandHomeTimeline","expandNotifications","fetchFilters","clearHeight","focusApp","unfocusApp","changeLayout","synchronouslySubmitMarkers","submitMarkers","fetchMarkers","WrappedSwitch","WrappedRoute","UploadArea","ColumnsAreaContainer","DocumentTitle","PictureInPicture","Compose","Status","GettingStarted","KeyboardShortcuts","PublicTimeline","CommunityTimeline","AccountTimeline","AccountGallery","HomeTimeline","Followers","Following","Reblogs","Favourites","DirectTimeline","HashtagTimeline","Notifications","FollowRequests","GenericNotFound","FavouritedStatuses","BookmarkedStatuses","ListTimeline","Blocks","DomainBlocks","Mutes","PinnedStatuses","Lists","Search","Directory","FollowRecommendations","me","closeOnboarding","INTRODUCTION_VERSION","messages","beforeUnload","mapStateToProps","state","layout","getIn","isComposing","hasComposingText","trim","length","hasMediaAttachments","size","canUploadMore","some","x","includes","get","dropdownMenuIsOpen","firstLaunch","keyMap","help","new","search","forceNew","toggleComposeSpoilers","focusColumn","reply","favourite","boost","mention","open","openProfile","moveDown","moveUp","back","goToHome","goToNotifications","goToLocal","goToFederated","goToDirect","goToStart","goToFavourites","goToPinned","goToProfile","goToBlocked","goToMuted","goToRequests","toggleHidden","toggleSensitive","openMedia","SwitchingColumnsArea","setRef","c","node","getWrappedInstance","componentWillMount","props","mobile","document","body","classList","toggle","componentDidUpdate","prevProps","location","pathname","handleChildrenContentChange","render","children","redirect","withReplies","PureComponent","propTypes","object","bool","UI","draggingOver","handleBeforeUnload","e","intl","dispatch","preventDefault","returnValue","formatMessage","handleWindowFocus","immediate","handleWindowBlur","handleDragEnter","dragTargets","indexOf","target","push","dataTransfer","Array","from","types","setState","handleDragOver","dataTransferIsText","stopPropagation","dropEffect","err","handleDrop","files","handleDragLeave","filter","el","contains","type","closeUploadModal","handleServiceWorkerPostMessage","data","context","router","history","path","console","warn","handleLayoutChange","trailing","handleResize","cancel","handleHotkeyNew","element","querySelector","focus","handleHotkeySearch","handleHotkeyForceNew","handleHotkeyToggleComposeSpoilers","handleHotkeyFocusColumn","index","key","column","container","status","scrollTop","offsetTop","scrollIntoView","handleHotkeyBack","window","goBack","setHotkeysRef","hotkeys","handleHotkeyToggleHelp","handleHotkeyGoToHome","handleHotkeyGoToNotifications","handleHotkeyGoToLocal","handleHotkeyGoToFederated","handleHotkeyGoToDirect","handleHotkeyGoToStart","handleHotkeyGoToFavourites","handleHotkeyGoToPinned","handleHotkeyGoToProfile","handleHotkeyGoToBlocked","handleHotkeyGoToMuted","handleHotkeyGoToRequests","componentDidMount","addEventListener","passive","handleDragEnd","navigator","serviceWorker","replace","setTimeout","__mousetrap__","stopCallback","tagName","componentWillUnmount","removeEventListener","handlers","pointerEvents","contextTypes","isRequired","func","string"],"mappings":"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","sourcesContent":["import classNames from 'classnames';\nimport React from 'react';\nimport { HotKeys } from 'react-hotkeys';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport NotificationsContainer from './containers/notifications_container';\nimport LoadingBarContainer from './containers/loading_bar_container';\nimport ModalContainer from './containers/modal_container';\nimport { layoutFromWindow } from 'mastodon/is_mobile';\nimport { debounce } from 'lodash';\nimport { uploadCompose, resetCompose, changeComposeSpoilerness } from '../../actions/compose';\nimport { expandHomeTimeline } from '../../actions/timelines';\nimport { expandNotifications } from '../../actions/notifications';\nimport { fetchFilters } from '../../actions/filters';\nimport { clearHeight } from '../../actions/height_cache';\nimport { focusApp, unfocusApp, changeLayout } from 'mastodon/actions/app';\nimport { synchronouslySubmitMarkers, submitMarkers, fetchMarkers } from 'mastodon/actions/markers';\nimport { WrappedSwitch, WrappedRoute } from './util/react_router_helpers';\nimport UploadArea from './components/upload_area';\nimport ColumnsAreaContainer from './containers/columns_area_container';\nimport DocumentTitle from './components/document_title';\nimport PictureInPicture from 'mastodon/features/picture_in_picture';\nimport {\n  Compose,\n  Status,\n  GettingStarted,\n  KeyboardShortcuts,\n  PublicTimeline,\n  CommunityTimeline,\n  AccountTimeline,\n  AccountGallery,\n  HomeTimeline,\n  Followers,\n  Following,\n  Reblogs,\n  Favourites,\n  DirectTimeline,\n  HashtagTimeline,\n  Notifications,\n  FollowRequests,\n  GenericNotFound,\n  FavouritedStatuses,\n  BookmarkedStatuses,\n  ListTimeline,\n  Blocks,\n  DomainBlocks,\n  Mutes,\n  PinnedStatuses,\n  Lists,\n  Search,\n  Directory,\n  FollowRecommendations,\n} from './util/async-components';\nimport { me } from '../../initial_state';\nimport { closeOnboarding, INTRODUCTION_VERSION } from 'mastodon/actions/onboarding';\n\n// Dummy import, to make sure that <Status /> ends up in the application bundle.\n// Without this it ends up in ~8 very commonly used bundles.\nimport '../../components/status';\n\nconst messages = defineMessages({\n  beforeUnload: { id: 'ui.beforeunload', defaultMessage: 'Your draft will be lost if you leave Mastodon.' },\n});\n\nconst mapStateToProps = state => ({\n  layout: state.getIn(['meta', 'layout']),\n  isComposing: state.getIn(['compose', 'is_composing']),\n  hasComposingText: state.getIn(['compose', 'text']).trim().length !== 0,\n  hasMediaAttachments: state.getIn(['compose', 'media_attachments']).size > 0,\n  canUploadMore: !state.getIn(['compose', 'media_attachments']).some(x => ['audio', 'video'].includes(x.get('type'))) && state.getIn(['compose', 'media_attachments']).size < 4,\n  dropdownMenuIsOpen: state.getIn(['dropdown_menu', 'openId']) !== null,\n  firstLaunch: state.getIn(['settings', 'introductionVersion'], 0) < INTRODUCTION_VERSION,\n});\n\nconst keyMap = {\n  help: '?',\n  new: 'n',\n  search: 's',\n  forceNew: 'option+n',\n  toggleComposeSpoilers: 'option+x',\n  focusColumn: ['1', '2', '3', '4', '5', '6', '7', '8', '9'],\n  reply: 'r',\n  favourite: 'f',\n  boost: 'b',\n  mention: 'm',\n  open: ['enter', 'o'],\n  openProfile: 'p',\n  moveDown: ['down', 'j'],\n  moveUp: ['up', 'k'],\n  back: 'backspace',\n  goToHome: 'g h',\n  goToNotifications: 'g n',\n  goToLocal: 'g l',\n  goToFederated: 'g t',\n  goToDirect: 'g d',\n  goToStart: 'g s',\n  goToFavourites: 'g f',\n  goToPinned: 'g p',\n  goToProfile: 'g u',\n  goToBlocked: 'g b',\n  goToMuted: 'g m',\n  goToRequests: 'g r',\n  toggleHidden: 'x',\n  toggleSensitive: 'h',\n  openMedia: 'e',\n};\n\nclass SwitchingColumnsArea extends React.PureComponent {\n\n  static propTypes = {\n    children: PropTypes.node,\n    location: PropTypes.object,\n    mobile: PropTypes.bool,\n  };\n\n  componentWillMount () {\n    if (this.props.mobile) {\n      document.body.classList.toggle('layout-single-column', true);\n      document.body.classList.toggle('layout-multiple-columns', false);\n    } else {\n      document.body.classList.toggle('layout-single-column', false);\n      document.body.classList.toggle('layout-multiple-columns', true);\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    if (![this.props.location.pathname, '/'].includes(prevProps.location.pathname)) {\n      this.node.handleChildrenContentChange();\n    }\n\n    if (prevProps.mobile !== this.props.mobile) {\n      document.body.classList.toggle('layout-single-column', this.props.mobile);\n      document.body.classList.toggle('layout-multiple-columns', !this.props.mobile);\n    }\n  }\n\n  setRef = c => {\n    if (c) {\n      this.node = c.getWrappedInstance();\n    }\n  }\n\n  render () {\n    const { children, mobile } = this.props;\n    const redirect = mobile ? <Redirect from='/' to='/timelines/home' exact /> : <Redirect from='/' to='/getting-started' exact />;\n\n    return (\n      <ColumnsAreaContainer ref={this.setRef} singleColumn={mobile}>\n        <WrappedSwitch>\n          {redirect}\n          <WrappedRoute path='/getting-started' component={GettingStarted} content={children} />\n          <WrappedRoute path='/keyboard-shortcuts' component={KeyboardShortcuts} content={children} />\n          <WrappedRoute path='/timelines/home' component={HomeTimeline} content={children} />\n          <WrappedRoute path='/timelines/public' exact component={PublicTimeline} content={children} />\n          <WrappedRoute path='/timelines/public/local' exact component={CommunityTimeline} content={children} />\n          <WrappedRoute path='/timelines/direct' component={DirectTimeline} content={children} />\n          <WrappedRoute path='/timelines/tag/:id' component={HashtagTimeline} content={children} />\n          <WrappedRoute path='/timelines/list/:id' component={ListTimeline} content={children} />\n\n          <WrappedRoute path='/notifications' component={Notifications} content={children} />\n          <WrappedRoute path='/favourites' component={FavouritedStatuses} content={children} />\n          <WrappedRoute path='/bookmarks' component={BookmarkedStatuses} content={children} />\n          <WrappedRoute path='/pinned' component={PinnedStatuses} content={children} />\n\n          <WrappedRoute path='/start' component={FollowRecommendations} content={children} />\n          <WrappedRoute path='/search' component={Search} content={children} />\n          <WrappedRoute path='/directory' component={Directory} content={children} />\n\n          <WrappedRoute path='/statuses/new' component={Compose} content={children} />\n          <WrappedRoute path='/statuses/:statusId' exact component={Status} content={children} />\n          <WrappedRoute path='/statuses/:statusId/reblogs' component={Reblogs} content={children} />\n          <WrappedRoute path='/statuses/:statusId/favourites' component={Favourites} content={children} />\n\n          <WrappedRoute path='/accounts/:accountId' exact component={AccountTimeline} content={children} />\n          <WrappedRoute path='/accounts/:accountId/with_replies' component={AccountTimeline} content={children} componentParams={{ withReplies: true }} />\n          <WrappedRoute path='/accounts/:accountId/followers' component={Followers} content={children} />\n          <WrappedRoute path='/accounts/:accountId/following' component={Following} content={children} />\n          <WrappedRoute path='/accounts/:accountId/media' component={AccountGallery} content={children} />\n\n          <WrappedRoute path='/follow_requests' component={FollowRequests} content={children} />\n          <WrappedRoute path='/blocks' component={Blocks} content={children} />\n          <WrappedRoute path='/domain_blocks' component={DomainBlocks} content={children} />\n          <WrappedRoute path='/mutes' component={Mutes} content={children} />\n          <WrappedRoute path='/lists' component={Lists} content={children} />\n\n          <WrappedRoute component={GenericNotFound} content={children} />\n        </WrappedSwitch>\n      </ColumnsAreaContainer>\n    );\n  }\n\n}\n\nexport default @connect(mapStateToProps)\n@injectIntl\n@withRouter\nclass UI extends React.PureComponent {\n\n  static contextTypes = {\n    router: PropTypes.object.isRequired,\n  };\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    children: PropTypes.node,\n    isComposing: PropTypes.bool,\n    hasComposingText: PropTypes.bool,\n    hasMediaAttachments: PropTypes.bool,\n    canUploadMore: PropTypes.bool,\n    location: PropTypes.object,\n    intl: PropTypes.object.isRequired,\n    dropdownMenuIsOpen: PropTypes.bool,\n    layout: PropTypes.string.isRequired,\n    firstLaunch: PropTypes.bool,\n  };\n\n  state = {\n    draggingOver: false,\n  };\n\n  handleBeforeUnload = e => {\n    const { intl, dispatch, isComposing, hasComposingText, hasMediaAttachments } = this.props;\n\n    dispatch(synchronouslySubmitMarkers());\n\n    if (isComposing && (hasComposingText || hasMediaAttachments)) {\n      e.preventDefault();\n      // Setting returnValue to any string causes confirmation dialog.\n      // Many browsers no longer display this text to users,\n      // but we set user-friendly message for other browsers, e.g. Edge.\n      e.returnValue = intl.formatMessage(messages.beforeUnload);\n    }\n  }\n\n  handleWindowFocus = () => {\n    this.props.dispatch(focusApp());\n    this.props.dispatch(submitMarkers({ immediate: true }));\n  }\n\n  handleWindowBlur = () => {\n    this.props.dispatch(unfocusApp());\n  }\n\n  handleDragEnter = (e) => {\n    e.preventDefault();\n\n    if (!this.dragTargets) {\n      this.dragTargets = [];\n    }\n\n    if (this.dragTargets.indexOf(e.target) === -1) {\n      this.dragTargets.push(e.target);\n    }\n\n    if (e.dataTransfer && Array.from(e.dataTransfer.types).includes('Files') && this.props.canUploadMore) {\n      this.setState({ draggingOver: true });\n    }\n  }\n\n  handleDragOver = (e) => {\n    if (this.dataTransferIsText(e.dataTransfer)) return false;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    try {\n      e.dataTransfer.dropEffect = 'copy';\n    } catch (err) {\n\n    }\n\n    return false;\n  }\n\n  handleDrop = (e) => {\n    if (this.dataTransferIsText(e.dataTransfer)) return;\n\n    e.preventDefault();\n\n    this.setState({ draggingOver: false });\n    this.dragTargets = [];\n\n    if (e.dataTransfer && e.dataTransfer.files.length >= 1 && this.props.canUploadMore) {\n      this.props.dispatch(uploadCompose(e.dataTransfer.files));\n    }\n  }\n\n  handleDragLeave = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.dragTargets = this.dragTargets.filter(el => el !== e.target && this.node.contains(el));\n\n    if (this.dragTargets.length > 0) {\n      return;\n    }\n\n    this.setState({ draggingOver: false });\n  }\n\n  dataTransferIsText = (dataTransfer) => {\n    return (dataTransfer && Array.from(dataTransfer.types).filter((type) => type === 'text/plain').length === 1);\n  }\n\n  closeUploadModal = () => {\n    this.setState({ draggingOver: false });\n  }\n\n  handleServiceWorkerPostMessage = ({ data }) => {\n    if (data.type === 'navigate') {\n      this.context.router.history.push(data.path);\n    } else {\n      console.warn('Unknown message type:', data.type);\n    }\n  }\n\n  handleLayoutChange = debounce(() => {\n    this.props.dispatch(clearHeight()); // The cached heights are no longer accurate, invalidate\n  }, 500, {\n    trailing: true,\n  });\n\n  handleResize = () => {\n    const layout = layoutFromWindow();\n\n    if (layout !== this.props.layout) {\n      this.handleLayoutChange.cancel();\n      this.props.dispatch(changeLayout(layout));\n    } else {\n      this.handleLayoutChange();\n    }\n  }\n\n  componentDidMount () {\n    window.addEventListener('focus', this.handleWindowFocus, false);\n    window.addEventListener('blur', this.handleWindowBlur, false);\n    window.addEventListener('beforeunload', this.handleBeforeUnload, false);\n    window.addEventListener('resize', this.handleResize, { passive: true });\n\n    document.addEventListener('dragenter', this.handleDragEnter, false);\n    document.addEventListener('dragover', this.handleDragOver, false);\n    document.addEventListener('drop', this.handleDrop, false);\n    document.addEventListener('dragleave', this.handleDragLeave, false);\n    document.addEventListener('dragend', this.handleDragEnd, false);\n\n    if ('serviceWorker' in  navigator) {\n      navigator.serviceWorker.addEventListener('message', this.handleServiceWorkerPostMessage);\n    }\n\n    // On first launch, redirect to the follow recommendations page\n    if (this.props.firstLaunch) {\n      this.context.router.history.replace('/start');\n      this.props.dispatch(closeOnboarding());\n    }\n\n    this.props.dispatch(fetchMarkers());\n    this.props.dispatch(expandHomeTimeline());\n    this.props.dispatch(expandNotifications());\n    setTimeout(() => this.props.dispatch(fetchFilters()), 500);\n\n    this.hotkeys.__mousetrap__.stopCallback = (e, element) => {\n      return ['TEXTAREA', 'SELECT', 'INPUT'].includes(element.tagName);\n    };\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('focus', this.handleWindowFocus);\n    window.removeEventListener('blur', this.handleWindowBlur);\n    window.removeEventListener('beforeunload', this.handleBeforeUnload);\n    window.removeEventListener('resize', this.handleResize);\n\n    document.removeEventListener('dragenter', this.handleDragEnter);\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragleave', this.handleDragLeave);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  }\n\n  setRef = c => {\n    this.node = c;\n  }\n\n  handleHotkeyNew = e => {\n    e.preventDefault();\n\n    const element = this.node.querySelector('.compose-form__autosuggest-wrapper textarea');\n\n    if (element) {\n      element.focus();\n    }\n  }\n\n  handleHotkeySearch = e => {\n    e.preventDefault();\n\n    const element = this.node.querySelector('.search__input');\n\n    if (element) {\n      element.focus();\n    }\n  }\n\n  handleHotkeyForceNew = e => {\n    this.handleHotkeyNew(e);\n    this.props.dispatch(resetCompose());\n  }\n\n  handleHotkeyToggleComposeSpoilers = e => {\n    e.preventDefault();\n    this.props.dispatch(changeComposeSpoilerness());\n  }\n\n  handleHotkeyFocusColumn = e => {\n    const index  = (e.key * 1) + 1; // First child is drawer, skip that\n    const column = this.node.querySelector(`.column:nth-child(${index})`);\n    if (!column) return;\n    const container = column.querySelector('.scrollable');\n\n    if (container) {\n      const status = container.querySelector('.focusable');\n\n      if (status) {\n        if (container.scrollTop > status.offsetTop) {\n          status.scrollIntoView(true);\n        }\n        status.focus();\n      }\n    }\n  }\n\n  handleHotkeyBack = () => {\n    if (window.history && window.history.length === 1) {\n      this.context.router.history.push('/');\n    } else {\n      this.context.router.history.goBack();\n    }\n  }\n\n  setHotkeysRef = c => {\n    this.hotkeys = c;\n  }\n\n  handleHotkeyToggleHelp = () => {\n    if (this.props.location.pathname === '/keyboard-shortcuts') {\n      this.context.router.history.goBack();\n    } else {\n      this.context.router.history.push('/keyboard-shortcuts');\n    }\n  }\n\n  handleHotkeyGoToHome = () => {\n    this.context.router.history.push('/timelines/home');\n  }\n\n  handleHotkeyGoToNotifications = () => {\n    this.context.router.history.push('/notifications');\n  }\n\n  handleHotkeyGoToLocal = () => {\n    this.context.router.history.push('/timelines/public/local');\n  }\n\n  handleHotkeyGoToFederated = () => {\n    this.context.router.history.push('/timelines/public');\n  }\n\n  handleHotkeyGoToDirect = () => {\n    this.context.router.history.push('/timelines/direct');\n  }\n\n  handleHotkeyGoToStart = () => {\n    this.context.router.history.push('/getting-started');\n  }\n\n  handleHotkeyGoToFavourites = () => {\n    this.context.router.history.push('/favourites');\n  }\n\n  handleHotkeyGoToPinned = () => {\n    this.context.router.history.push('/pinned');\n  }\n\n  handleHotkeyGoToProfile = () => {\n    this.context.router.history.push(`/accounts/${me}`);\n  }\n\n  handleHotkeyGoToBlocked = () => {\n    this.context.router.history.push('/blocks');\n  }\n\n  handleHotkeyGoToMuted = () => {\n    this.context.router.history.push('/mutes');\n  }\n\n  handleHotkeyGoToRequests = () => {\n    this.context.router.history.push('/follow_requests');\n  }\n\n  render () {\n    const { draggingOver } = this.state;\n    const { children, isComposing, location, dropdownMenuIsOpen, layout } = this.props;\n\n    const handlers = {\n      help: this.handleHotkeyToggleHelp,\n      new: this.handleHotkeyNew,\n      search: this.handleHotkeySearch,\n      forceNew: this.handleHotkeyForceNew,\n      toggleComposeSpoilers: this.handleHotkeyToggleComposeSpoilers,\n      focusColumn: this.handleHotkeyFocusColumn,\n      back: this.handleHotkeyBack,\n      goToHome: this.handleHotkeyGoToHome,\n      goToNotifications: this.handleHotkeyGoToNotifications,\n      goToLocal: this.handleHotkeyGoToLocal,\n      goToFederated: this.handleHotkeyGoToFederated,\n      goToDirect: this.handleHotkeyGoToDirect,\n      goToStart: this.handleHotkeyGoToStart,\n      goToFavourites: this.handleHotkeyGoToFavourites,\n      goToPinned: this.handleHotkeyGoToPinned,\n      goToProfile: this.handleHotkeyGoToProfile,\n      goToBlocked: this.handleHotkeyGoToBlocked,\n      goToMuted: this.handleHotkeyGoToMuted,\n      goToRequests: this.handleHotkeyGoToRequests,\n    };\n\n    return (\n      <HotKeys keyMap={keyMap} handlers={handlers} ref={this.setHotkeysRef} attach={window} focused>\n        <div className={classNames('ui', { 'is-composing': isComposing })} ref={this.setRef} style={{ pointerEvents: dropdownMenuIsOpen ? 'none' : null }}>\n          <SwitchingColumnsArea location={location} mobile={layout === 'mobile' || layout === 'single-column'}>\n            {children}\n          </SwitchingColumnsArea>\n\n          {layout !== 'mobile' && <PictureInPicture />}\n          <NotificationsContainer />\n          <LoadingBarContainer className='loading-bar' />\n          <ModalContainer />\n          <UploadArea active={draggingOver} onClose={this.closeUploadModal} />\n          <DocumentTitle />\n        </div>\n      </HotKeys>\n    );\n  }\n\n}\n"]},"metadata":{"react-intl":{"messages":[{"id":"ui.beforeunload","defaultMessage":"Your draft will be lost if you leave Mastodon."}]}},"sourceType":"module"}