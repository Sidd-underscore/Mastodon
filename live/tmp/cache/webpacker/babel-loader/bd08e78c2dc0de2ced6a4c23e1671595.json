{"ast":null,"code":"import './public-path';\nimport { delegate } from '@rails/ujs';\nimport ready from '../mastodon/ready';\nvar batchCheckboxClassName = '.batch-checkbox input[type=\"checkbox\"]';\ndelegate(document, '#batch_checkbox_all', 'change', function (_ref) {\n  var target = _ref.target;\n  [].forEach.call(document.querySelectorAll(batchCheckboxClassName), function (content) {\n    content.checked = target.checked;\n  });\n});\ndelegate(document, batchCheckboxClassName, 'change', function () {\n  var checkAllElement = document.querySelector('#batch_checkbox_all');\n\n  if (checkAllElement) {\n    checkAllElement.checked = [].every.call(document.querySelectorAll(batchCheckboxClassName), function (content) {\n      return content.checked;\n    });\n    checkAllElement.indeterminate = !checkAllElement.checked && [].some.call(document.querySelectorAll(batchCheckboxClassName), function (content) {\n      return content.checked;\n    });\n  }\n});\ndelegate(document, '.media-spoiler-show-button', 'click', function () {\n  [].forEach.call(document.querySelectorAll('button.media-spoiler'), function (element) {\n    element.click();\n  });\n});\ndelegate(document, '.media-spoiler-hide-button', 'click', function () {\n  [].forEach.call(document.querySelectorAll('.spoiler-button.spoiler-button--visible button'), function (element) {\n    element.click();\n  });\n});\ndelegate(document, '.filter-subset--with-select select', 'change', function (_ref2) {\n  var target = _ref2.target;\n  target.form.submit();\n});\n\nvar onDomainBlockSeverityChange = function onDomainBlockSeverityChange(target) {\n  var rejectMediaDiv = document.querySelector('.input.with_label.domain_block_reject_media');\n  var rejectReportsDiv = document.querySelector('.input.with_label.domain_block_reject_reports');\n\n  if (rejectMediaDiv) {\n    rejectMediaDiv.style.display = target.value === 'suspend' ? 'none' : 'block';\n  }\n\n  if (rejectReportsDiv) {\n    rejectReportsDiv.style.display = target.value === 'suspend' ? 'none' : 'block';\n  }\n};\n\ndelegate(document, '#domain_block_severity', 'change', function (_ref3) {\n  var target = _ref3.target;\n  return onDomainBlockSeverityChange(target);\n});\n\nvar onEnableBootstrapTimelineAccountsChange = function onEnableBootstrapTimelineAccountsChange(target) {\n  var bootstrapTimelineAccountsField = document.querySelector('#form_admin_settings_bootstrap_timeline_accounts');\n\n  if (bootstrapTimelineAccountsField) {\n    bootstrapTimelineAccountsField.disabled = !target.checked;\n\n    if (target.checked) {\n      bootstrapTimelineAccountsField.parentElement.classList.remove('disabled');\n      bootstrapTimelineAccountsField.parentElement.parentElement.classList.remove('disabled');\n    } else {\n      bootstrapTimelineAccountsField.parentElement.classList.add('disabled');\n      bootstrapTimelineAccountsField.parentElement.parentElement.classList.add('disabled');\n    }\n  }\n};\n\ndelegate(document, '#form_admin_settings_enable_bootstrap_timeline_accounts', 'change', function (_ref4) {\n  var target = _ref4.target;\n  return onEnableBootstrapTimelineAccountsChange(target);\n});\n\nvar onChangeRegistrationMode = function onChangeRegistrationMode(target) {\n  var enabled = target.value === 'approved';\n  [].forEach.call(document.querySelectorAll('#form_admin_settings_require_invite_text'), function (input) {\n    input.disabled = !enabled;\n\n    if (enabled) {\n      var element = input;\n\n      do {\n        element.classList.remove('disabled');\n        element = element.parentElement;\n      } while (element && !element.classList.contains('fields-group'));\n    } else {\n      var _element = input;\n\n      do {\n        _element.classList.add('disabled');\n\n        _element = _element.parentElement;\n      } while (_element && !_element.classList.contains('fields-group'));\n    }\n  });\n};\n\ndelegate(document, '#form_admin_settings_registrations_mode', 'change', function (_ref5) {\n  var target = _ref5.target;\n  return onChangeRegistrationMode(target);\n});\nready(function () {\n  var domainBlockSeverityInput = document.getElementById('domain_block_severity');\n  if (domainBlockSeverityInput) onDomainBlockSeverityChange(domainBlockSeverityInput);\n  var enableBootstrapTimelineAccounts = document.getElementById('form_admin_settings_enable_bootstrap_timeline_accounts');\n  if (enableBootstrapTimelineAccounts) onEnableBootstrapTimelineAccountsChange(enableBootstrapTimelineAccounts);\n  var registrationMode = document.getElementById('form_admin_settings_registrations_mode');\n  if (registrationMode) onChangeRegistrationMode(registrationMode);\n});","map":{"version":3,"sources":["/home/runner/Mastodon/live/app/javascript/packs/admin.js"],"names":["delegate","ready","batchCheckboxClassName","document","target","forEach","call","querySelectorAll","content","checked","checkAllElement","querySelector","every","indeterminate","some","element","click","form","submit","onDomainBlockSeverityChange","rejectMediaDiv","rejectReportsDiv","style","display","value","onEnableBootstrapTimelineAccountsChange","bootstrapTimelineAccountsField","disabled","parentElement","classList","remove","add","onChangeRegistrationMode","enabled","input","contains","domainBlockSeverityInput","getElementById","enableBootstrapTimelineAccounts","registrationMode"],"mappings":"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","sourcesContent":["import './public-path';\nimport { delegate } from '@rails/ujs';\nimport ready from '../mastodon/ready';\n\nconst batchCheckboxClassName = '.batch-checkbox input[type=\"checkbox\"]';\n\ndelegate(document, '#batch_checkbox_all', 'change', ({ target }) => {\n  [].forEach.call(document.querySelectorAll(batchCheckboxClassName), (content) => {\n    content.checked = target.checked;\n  });\n});\n\ndelegate(document, batchCheckboxClassName, 'change', () => {\n  const checkAllElement = document.querySelector('#batch_checkbox_all');\n\n  if (checkAllElement) {\n    checkAllElement.checked = [].every.call(document.querySelectorAll(batchCheckboxClassName), (content) => content.checked);\n    checkAllElement.indeterminate = !checkAllElement.checked && [].some.call(document.querySelectorAll(batchCheckboxClassName), (content) => content.checked);\n  }\n});\n\ndelegate(document, '.media-spoiler-show-button', 'click', () => {\n  [].forEach.call(document.querySelectorAll('button.media-spoiler'), (element) => {\n    element.click();\n  });\n});\n\ndelegate(document, '.media-spoiler-hide-button', 'click', () => {\n  [].forEach.call(document.querySelectorAll('.spoiler-button.spoiler-button--visible button'), (element) => {\n    element.click();\n  });\n});\n\ndelegate(document, '.filter-subset--with-select select', 'change', ({ target }) => {\n  target.form.submit();\n});\n\nconst onDomainBlockSeverityChange = (target) => {\n  const rejectMediaDiv   = document.querySelector('.input.with_label.domain_block_reject_media');\n  const rejectReportsDiv = document.querySelector('.input.with_label.domain_block_reject_reports');\n\n  if (rejectMediaDiv) {\n    rejectMediaDiv.style.display = (target.value === 'suspend') ? 'none' : 'block';\n  }\n\n  if (rejectReportsDiv) {\n    rejectReportsDiv.style.display = (target.value === 'suspend') ? 'none' : 'block';\n  }\n};\n\ndelegate(document, '#domain_block_severity', 'change', ({ target }) => onDomainBlockSeverityChange(target));\n\nconst onEnableBootstrapTimelineAccountsChange = (target) => {\n  const bootstrapTimelineAccountsField = document.querySelector('#form_admin_settings_bootstrap_timeline_accounts');\n\n  if (bootstrapTimelineAccountsField) {\n    bootstrapTimelineAccountsField.disabled = !target.checked;\n    if (target.checked) {\n      bootstrapTimelineAccountsField.parentElement.classList.remove('disabled');\n      bootstrapTimelineAccountsField.parentElement.parentElement.classList.remove('disabled');\n    } else {\n      bootstrapTimelineAccountsField.parentElement.classList.add('disabled');\n      bootstrapTimelineAccountsField.parentElement.parentElement.classList.add('disabled');\n    }\n  }\n};\n\ndelegate(document, '#form_admin_settings_enable_bootstrap_timeline_accounts', 'change', ({ target }) => onEnableBootstrapTimelineAccountsChange(target));\n\nconst onChangeRegistrationMode = (target) => {\n  const enabled = target.value === 'approved';\n\n  [].forEach.call(document.querySelectorAll('#form_admin_settings_require_invite_text'), (input) => {\n    input.disabled = !enabled;\n    if (enabled) {\n      let element = input;\n      do {\n        element.classList.remove('disabled');\n        element = element.parentElement;\n      } while (element && !element.classList.contains('fields-group'));\n    } else {\n      let element = input;\n      do {\n        element.classList.add('disabled');\n        element = element.parentElement;\n      } while (element && !element.classList.contains('fields-group'));\n    }\n  });\n};\n\ndelegate(document, '#form_admin_settings_registrations_mode', 'change', ({ target }) => onChangeRegistrationMode(target));\n\nready(() => {\n  const domainBlockSeverityInput = document.getElementById('domain_block_severity');\n  if (domainBlockSeverityInput) onDomainBlockSeverityChange(domainBlockSeverityInput);\n\n  const enableBootstrapTimelineAccounts = document.getElementById('form_admin_settings_enable_bootstrap_timeline_accounts');\n  if (enableBootstrapTimelineAccounts) onEnableBootstrapTimelineAccountsChange(enableBootstrapTimelineAccounts);\n\n  const registrationMode = document.getElementById('form_admin_settings_registrations_mode');\n  if (registrationMode) onChangeRegistrationMode(registrationMode);\n});\n"]},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module"}